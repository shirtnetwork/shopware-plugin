"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["extension459982526_ShirtnetworkPlugin_src_Resources_app_storefront_src_shirtnetwork-plugin_sh-99e063"],{857:e=>{var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==s},s="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a(Array.isArray(e)?[]:{},e,t):e}function i(e,t,s){return e.concat(t).map(function(e){return r(e,s)})}function n(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function o(e,t){try{return t in e}catch(e){return!1}}function a(e,s,c){(c=c||{}).arrayMerge=c.arrayMerge||i,c.isMergeableObject=c.isMergeableObject||t,c.cloneUnlessOtherwiseSpecified=r;var l,h,u=Array.isArray(s);return u!==Array.isArray(e)?r(s,c):u?c.arrayMerge(e,s,c):(h={},(l=c).isMergeableObject(e)&&n(e).forEach(function(t){h[t]=r(e[t],l)}),n(s).forEach(function(t){(!o(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(o(e,t)&&l.isMergeableObject(s[t])?h[t]=(function(e,t){if(!t.customMerge)return a;var s=t.customMerge(e);return"function"==typeof s?s:a})(t,l)(e[t],s[t],l):h[t]=r(s[t],l))}),h)}a.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,s){return a(e,s,t)},{})},e.exports=a},49:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(140);class i{static isNode(e){return"object"==typeof e&&null!==e&&(e===document||e===window||e instanceof Node)}static hasAttribute(e,t){if(!i.isNode(e))throw Error("The element must be a valid HTML Node!");return"function"==typeof e.hasAttribute&&e.hasAttribute(t)}static getAttribute(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(s&&!1===i.hasAttribute(e,t))throw Error('The required property "'.concat(t,'" does not exist!'));if("function"!=typeof e.getAttribute){if(s)throw Error("This node doesn't support the getAttribute function!");return}return e.getAttribute(t)}static getDataAttribute(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=t.replace(/^data(|-)/,""),o=r.Z.toLowerCamelCase(n,"-");if(!i.isNode(e)){if(s)throw Error("The passed node is not a valid HTML Node!");return}if(void 0===e.dataset){if(s)throw Error("This node doesn't support the dataset attribute!");return}let a=e.dataset[o];if(void 0===a){if(s)throw Error('The required data attribute "'.concat(t,'" does not exist on ').concat(e,"!"));return a}return r.Z.parsePrimitive(a)}static querySelector(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(s&&!i.isNode(e))throw Error("The parent node is not a valid HTML Node!");let r=e.querySelector(t)||!1;if(s&&!1===r)throw Error('The required element "'.concat(t,'" does not exist in parent node!'));return r}static querySelectorAll(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(s&&!i.isNode(e))throw Error("The parent node is not a valid HTML Node!");let r=e.querySelectorAll(t);if(0===r.length&&(r=!1),s&&!1===r)throw Error('At least one item of "'.concat(t,'" must exist in parent node!'));return r}}},140:(e,t,s)=>{s.d(t,{Z:()=>r});class r{static ucFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}static lcFirst(e){return e.charAt(0).toLowerCase()+e.slice(1)}static toDashCase(e){return e.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(e,t){let s=r.toUpperCamelCase(e,t);return r.lcFirst(s)}static toUpperCamelCase(e,t){return t?e.split(t).map(e=>r.ucFirst(e.toLowerCase())).join(""):r.ucFirst(e.toLowerCase())}static parsePrimitive(e){try{return/^\d+(.|,)\d+$/.test(e)&&(e=e.replace(",",".")),JSON.parse(e)}catch(t){return e.toString()}}}},293:(e,t,s)=>{s.d(t,{Z:()=>c});var r=s(857),i=s.n(r),n=s(49),o=s(140);class a{publish(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new CustomEvent(e,{detail:t,cancelable:s});return this.el.dispatchEvent(r),r}subscribe(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this,i=e.split("."),n=s.scope?t.bind(s.scope):t;if(s.once&&!0===s.once){let t=n;n=function(s){r.unsubscribe(e),t(s)}}return this.el.addEventListener(i[0],n),this.listeners.push({splitEventName:i,opts:s,cb:n}),!0}unsubscribe(e){let t=e.split(".");return this.listeners=this.listeners.reduce((e,s)=>([...s.splitEventName].sort().toString()===t.sort().toString()?this.el.removeEventListener(s.splitEventName[0],s.cb):e.push(s),e),[]),!0}reset(){return this.listeners.forEach(e=>{this.el.removeEventListener(e.splitEventName[0],e.cb)}),this.listeners=[],!0}get el(){return this._el}set el(e){this._el=e}get listeners(){return this._listeners}set listeners(e){this._listeners=e}constructor(e=document){this._el=e,e.$emitter=this,this._listeners=[]}}class c{init(){throw Error('The "init" method for the plugin "'.concat(this._pluginName,'" is not defined.'))}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(e){let t=o.Z.toDashCase(this._pluginName),s=n.Z.getDataAttribute(this.el,"data-".concat(t,"-config"),!1),r=n.Z.getAttribute(this.el,"data-".concat(t,"-options"),!1),a=[this.constructor.options,this.options,e];s&&a.push(window.PluginConfigManager.get(this._pluginName,s));try{r&&a.push(JSON.parse(r))}catch(e){throw console.error(this.el),Error('The data attribute "data-'.concat(t,'-options" could not be parsed to json: ').concat(e.message))}return i().all(a.filter(e=>e instanceof Object&&!(e instanceof Array)).map(e=>e||{}))}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(e){return e||(e=this.constructor.name),e}constructor(e,t={},s=!1){if(!n.Z.isNode(e))throw Error("There is no valid element given.");this.el=e,this.$emitter=new a(this.el),this._pluginName=this._getPluginName(s),this.options=this._mergeOptions(t),this._initialized=!1,this._registerInstance(),this._init()}}},107:(e,t,s)=>{s.d(t,{Z:()=>r});class r{get(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=this._createPreparedRequest("GET",e,s);return this._sendRequest(r,null,t)}post(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";r=this._getContentType(t,r);let i=this._createPreparedRequest("POST",e,r);return this._sendRequest(i,t,s)}delete(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";r=this._getContentType(t,r);let i=this._createPreparedRequest("DELETE",e,r);return this._sendRequest(i,t,s)}patch(e,t,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/json";r=this._getContentType(t,r);let i=this._createPreparedRequest("PATCH",e,r);return this._sendRequest(i,t,s)}abort(){if(this._request)return this._request.abort()}setErrorHandlingInternal(e){this._errorHandlingInternal=e}_registerOnLoaded(e,t){t&&(!0===this._errorHandlingInternal?(e.addEventListener("load",()=>{t(e.responseText,e)}),e.addEventListener("abort",()=>{console.warn("the request to ".concat(e.responseURL," was aborted"))}),e.addEventListener("error",()=>{console.warn("the request to ".concat(e.responseURL," failed with status ").concat(e.status))}),e.addEventListener("timeout",()=>{console.warn("the request to ".concat(e.responseURL," timed out"))})):e.addEventListener("loadend",()=>{t(e.responseText,e)}))}_sendRequest(e,t,s){return this._registerOnLoaded(e,s),e.send(t),e}_getContentType(e,t){return e instanceof FormData&&(t=!1),t}_createPreparedRequest(e,t,s){return this._request=new XMLHttpRequest,this._request.open(e,t),this._request.setRequestHeader("X-Requested-With","XMLHttpRequest"),s&&this._request.setRequestHeader("Content-type",s),this._request}constructor(){this._request=null,this._errorHandlingInternal=!1}}},921:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var r=s(293),i=s(49);class n{static isTouchDevice(){return"ontouchstart"in document.documentElement}static isIOSDevice(){return n.isIPhoneDevice()||n.isIPadDevice()}static isNativeWindowsBrowser(){return n.isIEBrowser()||n.isEdgeBrowser()}static isIPhoneDevice(){return!!navigator.userAgent.match(/iPhone/i)}static isIPadDevice(){return!!navigator.userAgent.match(/iPad/i)}static isIEBrowser(){return -1!==navigator.userAgent.toLowerCase().indexOf("msie")||!!navigator.userAgent.match(/Trident.*rv:\d+\./)}static isEdgeBrowser(){return!!navigator.userAgent.match(/Edge\/\d+/i)}static getList(){return{"is-touch":n.isTouchDevice(),"is-ios":n.isIOSDevice(),"is-native-windows":n.isNativeWindowsBrowser(),"is-iphone":n.isIPhoneDevice(),"is-ipad":n.isIPadDevice(),"is-ie":n.isIEBrowser(),"is-edge":n.isEdgeBrowser()}}}class o{static iterate(e,t){if(e instanceof Map||Array.isArray(e))return e.forEach(t);if(e instanceof FormData){for(var s of e.entries())t(s[1],s[0]);return}if(e instanceof NodeList)return e.forEach(t);if(e instanceof HTMLCollection)return Array.from(e).forEach(t);if(e instanceof Object)return Object.keys(e).forEach(s=>{t(e[s],s)});throw Error("The element type ".concat(typeof e," is not iterable!"))}}let a="modal-backdrop",c="modal-backdrop-open",l="no-scroll",h={ON_CLICK:"backdrop/onclick"};class u{create(e){this._removeExistingBackdrops(),document.body.insertAdjacentHTML("beforeend",this._getTemplate());let t=document.body.lastChild;document.documentElement.classList.add(l),setTimeout(function(){t.classList.add(c),"function"==typeof e&&e()},75),this._dispatchEvents()}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350,t=this._getBackdrops();o.iterate(t,e=>e.classList.remove(c)),setTimeout(this._removeExistingBackdrops.bind(this),e),document.documentElement.classList.remove(l)}_dispatchEvents(){let e=n.isTouchDevice()?"touchstart":"click";document.addEventListener(e,function(e){e.target.classList.contains(a)&&document.dispatchEvent(new CustomEvent(h.ON_CLICK))})}_getBackdrops(){return document.querySelectorAll(".".concat(a))}_removeExistingBackdrops(){if(!1===this._exists())return;let e=this._getBackdrops();o.iterate(e,e=>e.remove())}_exists(){return document.querySelectorAll(".".concat(a)).length>0}_getTemplate(){return'<div class="'.concat(a,'"></div>')}constructor(){return u.instance||(u.instance=this),u.instance}}let d=Object.freeze(new u);class p{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;d.create(e)}static remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:350;d.remove(e)}static SELECTOR_CLASS(){return a}}let m="js-pseudo-modal";class g{open(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;this._hideExistingModal(),this._create(),setTimeout(this._open.bind(this,e),t)}close(){let e=this.getModal();this._modalInstance=bootstrap.Modal.getInstance(e),this._modalInstance.hide()}getModal(){return this._modal||this._create(),this._modal}updatePosition(){this._modalInstance.handleUpdate()}updateContent(e,t){this._content=e,this._setModalContent(e),this.updatePosition(),"function"==typeof t&&t.bind(this)()}_hideExistingModal(){try{let e=i.Z.querySelector(document,".".concat(m," .modal"),!1);if(!e)return;let t=bootstrap.Modal.getInstance(e);if(!t)return;t.hide()}catch(e){console.warn("[PseudoModalUtil] Unable to hide existing pseudo modal before opening pseudo modal: ".concat(e.message))}}_open(e){this.getModal(),this._modal.addEventListener("hidden.bs.modal",this._modalWrapper.remove),this._modal.addEventListener("shown.bs.modal",e),this._modalInstance.show()}_create(){this._modalMarkupEl=i.Z.querySelector(document,this._templateSelector),this._createModalWrapper(),this._modalWrapper.innerHTML=this._content,this._modal=this._createModalMarkup(),this._modalInstance=new bootstrap.Modal(this._modal,{backdrop:this._useBackdrop}),document.body.insertAdjacentElement("beforeend",this._modalWrapper)}_createModalWrapper(){this._modalWrapper=i.Z.querySelector(document,".".concat(m),!1),this._modalWrapper||(this._modalWrapper=document.createElement("div"),this._modalWrapper.classList.add(m))}_createModalMarkup(){let e=i.Z.querySelector(this._modalWrapper,".modal",!1);if(e)return e;let t=this._modalWrapper.innerHTML;return this._modalWrapper.innerHTML=this._modalMarkupEl.innerHTML,this._setModalContent(t),i.Z.querySelector(this._modalWrapper,".modal")}_setModalTitle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{i.Z.querySelector(this._modalWrapper,this._templateTitleSelector).innerHTML=e}catch(e){}}_setModalContent(e){let t=i.Z.querySelector(this._modalWrapper,this._templateContentSelector);t.innerHTML=e;try{let e=i.Z.querySelector(t,this._templateTitleSelector);e&&(this._setModalTitle(e.innerHTML),e.parentNode.removeChild(e))}catch(e){}}constructor(e,t=!0,s=".".concat("js-pseudo-modal-template"),r=".".concat("js-pseudo-modal-template-content-element"),i=".".concat("js-pseudo-modal-template-title-element")){this._content=e,this._useBackdrop=t,this._templateSelector=s,this._templateContentSelector=r,this._templateTitleSelector=i}}var f=s(107);let _="loader",v={BEFORE:"before",INNER:"inner"};class b{create(){if(!this.exists()){if(this.position===v.INNER){this.parent.innerHTML=b.getTemplate();return}this.parent.insertAdjacentHTML(this._getPosition(),b.getTemplate())}}remove(){let e=this.parent.querySelectorAll(".".concat(_));o.iterate(e,e=>e.remove())}exists(){return this.parent.querySelectorAll(".".concat(_)).length>0}_getPosition(){return this.position===v.BEFORE?"afterbegin":"beforeend"}static getTemplate(){return'<div class="'.concat(_,'" role="status">\n                    <span class="').concat("visually-hidden",'">Loading...</span>\n                </div>')}static SELECTOR_CLASS(){return _}constructor(e,t=v.BEFORE){this.parent=e instanceof Element?e:document.body.querySelector(e),this.position=t}}let y=Object.freeze(new class extends b{create(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];!this.exists()&&e&&(p.create(),document.querySelector(".".concat(p.SELECTOR_CLASS())).insertAdjacentHTML("beforeend",b.getTemplate()))}remove(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];super.remove(),e&&p.remove()}constructor(){super(document.body)}});class w{static create(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];y.create(e)}static remove(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];y.remove(e)}}class S{async post(e,t){return await this.toPromise(this.client.post(e,t,this.callback))}async get(e){return this.toPromise(this.client.get(e,this.callback))}toPromise(e){return new Promise(function(t,s){e.onreadystatechange=function(){4===e.readyState&&(e.status>=200&&e.status<300?t(e.responseText):s({status:e.status,statusText:e.statusText}))}})}callback(){}constructor(e){this.client=new f.Z;let t=this.client._createPreparedRequest.bind(this.client);this.client._createPreparedRequest=function(s,r,i){let n=t(s,r,i);return n.setRequestHeader("sw-access-key",e),n}}}let E=e=>new Promise((t,s)=>{let r=document.createElement("script");r.src=e,r.async=!0,r.onerror=s,r.onload=r.onreadystatechange=function(){let e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,t())},document.head.appendChild(r)});class T extends r.Z{init(){w.create(),this._httpClient=new f.Z,this.client=new S(this.options.swAccessKey),this.cartItems=[],this.cache={},this.baseSkuScheme=this.options.baseSkuScheme||"{PRODUCT_SKU}",this.skuScheme=this.options.skuScheme||"{PRODUCT_SKU}-{VARIANT_SKU}-{SIZE_SKU}",this.pages=this.options.pages||{},E("//cdn.shirtnetwork.de/client/shirtnetwork-client.js").then(()=>this.boot())}async boot(){let e=function e(t,s){if(null==t)return s;for(var r in s)s[r].constructor===Object?t[r]=e(t[r],s[r]):void 0===t[r]&&(t[r]=s[r]);return t}(this.options,{settings:{container:this.el.id,shop:{cart:{link:"/checkout/cart",data:{},handler:this.getCheckoutData.bind(this),addItem:this.addItemToCart.bind(this),submit:this.submitCart.bind(this),init:()=>{},showAfterSalesModal:!1},infos:{handler:this.getShopInfos.bind(this)},stock:{handler:this.getStockInfos.bind(this)}}}}),t=this.instance=await ShirtnetworkClient.init(e);this.options.translations&&t.$store.dispatch("setTranslation",{lang:this.options.language.split("-")[0].toLowerCase(),translation:this.options.translations}),t.$store.dispatch("setLanguage",this.options.language),t.$store.dispatch("observe",{event:"navigate",callback:this.navigate.bind(this)}),setTimeout(()=>w.remove(),1500)}async addItemToCart(e,t,s){this.cartItems.push({type:"product",referencedId:s.oxid,quantity:Number.parseInt(s.amount),payload:{shirtnetwork:e}})}async getShopInfos(e){return await this.getProduct(e)}async getStockInfos(e){let t=this.resolveBaseSku(e.psku,e.vsku,e.ssku);if(t){let e=JSON.parse(await this.client.get("/shirtnetwork/designer-stock-infos/"+t));return null!=e?e:[]}return[]}async getCheckoutData(e){let t;let s=await this.getProduct(e);if(e.sskus)for(let s of(t=[],e.sskus)){let r=await this.getProduct(Object.assign({},e,{ssku:s.sku}));r&&t.push({oxid:r.id,id:r.id,amount:s.amount,size:s.size})}return{aid:s?s.id:void 0,sizes:t.length?t:void 0}}async getProduct(e){let t=this.resolveSku(e.psku,e.vsku,e.ssku);if(!t)return{};{if(this.cache[t])return this.cache[t];let s=JSON.parse(await this.client.post("/store-api/product",JSON.stringify({filter:[{type:"equals",field:"productNumber",value:this.resolveSku(e.psku,e.vsku,e.ssku)}]}),!0));return console.log("after getProduct",s),this.cache[t]=s.elements&&s.elements.length?s.elements[0]:{},this.cache[t]}}async submitCart(){let e=await this.client.post("/shirtnetwork/add-to-cart",JSON.stringify({lineItems:this.cartItems}));return this.cartItems=[],this.instance.$store.dispatch("setIsNavigatingToCart",!0),this.openOffCanvas(),e}navigate(e){this.pages[e]&&(w.create(),this._httpClient.get(this.pages[e],e=>{w.remove(),new g(e).open()}))}openOffCanvas(){for(let e of window.PluginManager.getPluginInstances("OffCanvasCart"))e.openOffCanvas(window.router["frontend.cart.offcanvas"],!1)}resolveSku(e,t,s){return this.resolveByScheme(e,t,s,this.skuScheme)}resolveBaseSku(e,t,s){return this.resolveByScheme(e,t,s,this.baseSkuScheme)}resolveByScheme(e,t,s,r){return -1===r.indexOf("${")?r.replace("{PRODUCT_SKU}",e).replace("{VARIANT_SKU}",t).replace("{SIZE_SKU}",s):Function('const product = "'.concat(e,'"; const variant = "').concat(t,'"; const size = "').concat(s,'"; return `').concat(new String(r),"`;"))()}}T.options={version:"1.6.4"}}}]);