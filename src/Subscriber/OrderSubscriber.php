<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-11-08 13:08:05              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $gcxoc, EntityRepository $wNPRC) { $this->apiClient = $gcxoc; $this->orderRepository = $wNPRC; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\x6e\x4f\162\144\145\x72\120\x6c\x61\x63\x65\x64"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $SwGYg) { goto wa4LO; wa4LO: $RrxM5 = $SwGYg->getOrder(); goto m2UKW; m2UKW: $V4au1 = $RrxM5->getLineItems(); goto YEYvP; VXLGG: foreach ($V4au1 as $Gq0jm) { goto ixhcc; ixhcc: $l1xjZ = $Gq0jm->getPayload(); goto kw992; J3aQl: hi0FV: goto pzt1g; g4edq: $isOay += $Aa9Wt->getQuantity(); goto bvsKZ; kw992: if (!isset($l1xjZ["\x73\x68\151\x72\164\x6e\145\x74\167\157\x72\153"])) { goto AR1m3; } goto jug3V; m3sSv: AR1m3: goto J3aQl; bvsKZ: iKJaQ: goto m3sSv; FXY25: goto iKJaQ; goto FLCkN; jug3V: $Aa9Wt = $Gq0jm->getPrice(); goto DkRTc; FLCkN: b2O9t: goto g4edq; DkRTc: if ($Aa9Wt->getUnitPrice() >= 10) { goto b2O9t; } goto lbYlM; lbYlM: $gQCbg = $Aa9Wt->getUnitPrice() / 10 * $Aa9Wt->getQuantity(); goto FXY25; pzt1g: } goto zwrX8; YEYvP: $isOay = 0; goto mVV67; cJPFI: if (trim($RXdj9) != '' && trim($RXdj9) != "\117\x4b") { goto TZrJR; } goto O1C3L; mVV67: $gQCbg = 0; goto VXLGG; M3mCC: $RXdj9 = $this->apiClient->bookCoins($RrxM5->getSalesChannelId(), $isOay, $RrxM5->getOrderNumber(), 0, $gQCbg); goto cJPFI; c5sm2: $this->orderRepository->delete([["\151\144" => $RrxM5->getId()]]); goto VPtsj; eg26r: fGy5H: goto zPFBD; HhLMt: goto fGy5H; goto niknb; O1C3L: $this->apiClient->manifestOrder($RrxM5->getSalesChannelId(), $RrxM5); goto HhLMt; U_Nye: if (!($isOay > 0 || $gQCbg > 0)) { goto t3fVg; } goto M3mCC; VPtsj: throw new \Exception("\x53\110\111\122\124\x4e\x45\124\x57\117\122\x4b\137\103\101\116\116\117\x54\x5f\x4f\122\x44\105\x52"); goto eg26r; zPFBD: t3fVg: goto G1Kur; zwrX8: VPeCk: goto U_Nye; niknb: TZrJR: goto c5sm2; G1Kur: } }