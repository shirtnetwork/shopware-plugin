<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-07-30 10:25:24              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $BcMur, EntityRepository $SU5zl) { $this->apiClient = $BcMur; $this->orderRepository = $SU5zl; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\x6e\x4f\162\144\x65\162\x50\x6c\141\143\x65\x64"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $fpKVZ) { goto KRR8_; BwMql: if (!($aNZLx > 0 || $APQ0W > 0)) { goto Z_IvN; } goto dKnJT; tuHKz: throw new \Exception("\123\x48\x49\122\x54\116\105\124\x57\x4f\122\113\137\x43\x41\x4e\x4e\117\x54\x5f\x4f\x52\x44\105\x52"); goto vmWfg; KRR8_: $aCNiB = $fpKVZ->getOrder(); goto cSQLY; NA2Cg: MVgNl: goto BwMql; UMSmG: $aNZLx = 0; goto iWrz8; cSQLY: $B1o3W = $aCNiB->getLineItems(); goto UMSmG; DKnaz: goto oFB0D; goto yKp1S; iWrz8: $APQ0W = 0; goto tdA5e; IDjq1: $this->apiClient->manifestOrder($aCNiB->getSalesChannelId(), $aCNiB); goto DKnaz; U7fy0: if (trim($cdHSZ) != '' && trim($cdHSZ) != "\117\x4b") { goto VKnX6; } goto DMA8T; dKnJT: $cdHSZ = $this->apiClient->bookCoins($aCNiB->getSalesChannelId(), $aNZLx, $aCNiB->getOrderNumber(), 0, $APQ0W); goto U7fy0; tdA5e: foreach ($B1o3W as $Nsmt9) { goto VhUOT; VhUOT: $BdBFL = $Nsmt9->getPayload(); goto e_Cmy; h3buk: if ($WAEOn->getUnitPrice() >= 10) { goto NjOml; } goto oLH0J; vClH2: $H_gZm = $H_gZm / $C0j7f->packageUnit; goto pNyZz; zke1I: i2kxk: goto DJzmL; evbS0: $H_gZm = $WAEOn->getQuantity(); goto Apsu2; e_Cmy: if (!isset($BdBFL["\163\150\151\x72\164\156\x65\164\x77\x6f\162\x6b"])) { goto Ztr0y; } goto XTaVt; kY6s_: goto i2kxk; goto DiwL2; pNyZz: n6sa7: goto h3buk; Ky7B0: aAP7G: goto q7NtV; XTaVt: $WAEOn = $Nsmt9->getPrice(); goto sDeTk; oLH0J: $APQ0W += $WAEOn->getUnitPrice() / 10 * $H_gZm; goto kY6s_; DiwL2: NjOml: goto vv9ms; WC5uz: $C0j7f = isset($YDJiZ["\x70\x72\157\x64\165\x63\x74"]) ? $this->apiClient->getProductById($fpKVZ->getSalesChannelId(), $YDJiZ["\x70\162\157\144\165\x63\x74"]) : null; goto evbS0; DJzmL: Ztr0y: goto Ky7B0; vv9ms: $aNZLx += $H_gZm; goto zke1I; sDeTk: $YDJiZ = $BdBFL["\163\150\151\x72\x74\156\x65\x74\x77\x6f\x72\153\143\157\156\x66\x69\147"]; goto WC5uz; Apsu2: if (!($C0j7f && $C0j7f->packageUnit > 0)) { goto n6sa7; } goto vClH2; q7NtV: } goto NA2Cg; a2TRH: Z_IvN: goto gaD6f; yKp1S: VKnX6: goto M2ZFw; DMA8T: $this->orderRepository->update([["\x69\x64" => $aCNiB->getId(), "\x63\165\x73\164\x6f\155\106\151\x65\154\x64\x73" => ["\163\150\151\x72\164\x6e\x65\164\167\x6f\x72\153" => ["\x71\x75\141\x6e\x74\x69\x74\171" => $aNZLx, "\x73\165\155" => $APQ0W]]]], $fpKVZ->getContext()); goto IDjq1; M2ZFw: $this->orderRepository->delete([["\x69\144" => $aCNiB->getId()]], $fpKVZ->getContext()); goto tuHKz; vmWfg: oFB0D: goto a2TRH; gaD6f: } }