<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-26 08:48:40              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $R5d98, EntityRepository $P5fCS) { $this->apiClient = $R5d98; $this->orderRepository = $P5fCS; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\156\x4f\x72\x64\145\162\120\x6c\141\x63\145\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $odyIK) { goto VKq01; IwLFZ: $this->orderRepository->delete([["\151\144" => $kcxZA->getId()]]); goto MR0Fz; wVWoH: A_Tec: goto IwLFZ; Z1ho7: J3Hca: goto JrfZh; Hc_bU: goto E2bA1; goto wVWoH; NoUBw: $QX1AP = $kcxZA->getLineItems(); goto r5KW7; eCPPy: if (!($U_VCH > 0 || $YjnIw > 0)) { goto J3Hca; } goto KLd_g; MR0Fz: throw new \Exception("\123\x48\x49\x52\124\116\105\x54\127\x4f\x52\x4b\137\x43\101\x4e\116\x4f\124\137\x4f\122\104\x45\122"); goto efA7B; hKV46: RDr68: goto eCPPy; mhY4t: $this->apiClient->manifestOrder($kcxZA->getSalesChannelId(), $kcxZA); goto Hc_bU; efA7B: E2bA1: goto Z1ho7; IUN07: if (trim($tbgn9) != '' && trim($tbgn9) != "\117\x4b") { goto A_Tec; } goto mhY4t; B0aH1: $YjnIw = 0; goto GJjRD; KLd_g: $tbgn9 = $this->apiClient->bookCoins($kcxZA->getSalesChannelId(), $U_VCH, $kcxZA->getOrderNumber(), 0, $YjnIw); goto IUN07; GJjRD: foreach ($QX1AP as $P_nSs) { goto R8XAp; sf46o: IU4cW: goto UyWLs; RZGoA: $U_VCH += $u872F->getQuantity(); goto sf46o; R8XAp: $pXRJb = $P_nSs->getPayload(); goto Pd8jA; AG6ZN: PK579: goto RZGoA; dR33n: $YjnIw = $u872F->getUnitPrice() / 10 * $u872F->getQuantity(); goto T27rN; cU00P: K8EwO: goto u74Ui; bhYec: if ($u872F->getUnitPrice() >= 10) { goto PK579; } goto dR33n; UyWLs: AisMf: goto cU00P; nDS6D: $u872F = $P_nSs->getPrice(); goto bhYec; T27rN: goto IU4cW; goto AG6ZN; Pd8jA: if (!isset($pXRJb["\163\x68\x69\162\x74\x6e\145\164\x77\x6f\x72\153"])) { goto AisMf; } goto nDS6D; u74Ui: } goto hKV46; r5KW7: $U_VCH = 0; goto B0aH1; VKq01: $kcxZA = $odyIK->getOrder(); goto NoUBw; JrfZh: } }