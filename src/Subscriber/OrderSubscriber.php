<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-16 12:20:57              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $y3tda, EntityRepository $eKpES) { $this->apiClient = $y3tda; $this->orderRepository = $eKpES; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\x6e\117\162\144\x65\162\120\x6c\x61\143\145\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $jPgax) { goto a9O88; nemzA: $liVtp = 0; goto grl_S; RLzH1: xAQvU: goto Yx1zm; hM2eO: $Ay2AB = 0; goto nemzA; Wyu52: goto XC34I; goto RLzH1; a9O88: $cVItz = $jPgax->getOrder(); goto w79PV; W4L8g: $XBEwk = $this->apiClient->bookCoins($cVItz->getSalesChannelId(), $Ay2AB, $cVItz->getOrderNumber(), 0, $liVtp); goto xMphj; vENOG: throw new \Exception("\123\x48\111\x52\124\116\x45\x54\127\117\122\x4b\137\103\101\116\x4e\117\124\x5f\117\122\104\x45\x52"); goto P7nIn; xMphj: if (trim($XBEwk) != '' && trim($XBEwk) != "\117\x4b") { goto xAQvU; } goto tWFTu; w79PV: $XBoC5 = $cVItz->getLineItems(); goto hM2eO; Yx1zm: $this->orderRepository->delete([["\151\x64" => $cVItz->getId()]]); goto vENOG; GpUj3: mX8Mb: goto xIOyl; xIOyl: if (!($Ay2AB > 0 || $liVtp > 0)) { goto Tynzz; } goto W4L8g; tWFTu: $this->apiClient->manifestOrder($cVItz->getSalesChannelId(), $cVItz); goto Wyu52; grl_S: foreach ($XBoC5 as $Hoh4A) { goto JCECD; fyJUB: $hJ7AL = $Hoh4A->getPrice(); goto Ha4KV; Vavsq: VzTLK: goto Qlbd8; Qlbd8: sJjH2: goto DlHgj; DlHgj: deRxC: goto tNHcA; Gy36X: JFezS: goto K9caF; GjST4: if (!isset($niihl["\163\x68\151\162\x74\156\145\164\167\157\162\x6b"])) { goto sJjH2; } goto fyJUB; K9caF: $Ay2AB += $hJ7AL->getQuantity(); goto Vavsq; GMm6D: $liVtp = $hJ7AL->getUnitPrice() / 10 * $hJ7AL->getQuantity(); goto ENfcV; ENfcV: goto VzTLK; goto Gy36X; JCECD: $niihl = $Hoh4A->getPayload(); goto GjST4; Ha4KV: if ($hJ7AL->getUnitPrice() >= 10) { goto JFezS; } goto GMm6D; tNHcA: } goto GpUj3; rB5ZK: Tynzz: goto QMfB4; P7nIn: XC34I: goto rB5ZK; QMfB4: } }