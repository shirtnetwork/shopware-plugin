<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.17  |
    |              on 2025-11-11 12:55:03              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $CVTVp, EntityRepository $B_6OG) { $this->apiClient = $CVTVp; $this->orderRepository = $B_6OG; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\156\117\x72\144\x65\162\120\154\141\143\145\x64"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $cxI5Q) { goto wcBBC; Abnd3: $this->apiClient->manifestOrder($ljj7G->getSalesChannelId(), $ljj7G); goto NQ_Em; m0Wu1: $HsoiR = $ljj7G->getLineItems(); goto pAMIw; Cmox9: throw new \Exception("\x53\x48\x49\x52\x54\x4e\105\x54\x57\x4f\x52\113\x5f\x43\x41\x4e\x4e\117\124\137\117\x52\104\105\122"); goto J5PfL; JfilQ: if (trim($jS_B5) != '' && trim($jS_B5) != "\x4f\113") { goto bqrh3; } goto iHgv0; WNse2: RDwwI: goto Vy_H2; J5PfL: VTlDL: goto m8KTE; pFrH4: bqrh3: goto TzNEs; m8KTE: FDS21: goto Sb1_4; iHgv0: $this->orderRepository->update([["\151\x64" => $ljj7G->getId(), "\143\x75\163\x74\157\155\106\x69\145\x6c\x64\163" => ["\163\x68\x69\162\164\156\145\x74\x77\x6f\162\153" => ["\161\x75\141\x6e\x74\151\164\x79" => $khUQ4, "\x73\x75\x6d" => $GY8E4]]]], $cxI5Q->getContext()); goto Abnd3; n2W3J: foreach ($HsoiR as $VFgK2) { goto q9m7t; A1v0H: $khUQ4 += $Oh91o; goto zLsUr; Bu72S: FuiQK: goto IL_aY; fzWQr: goto wbG7Y; goto Dl3oY; q9m7t: $NBxeb = $VFgK2->getPayload(); goto fbaOg; wZp88: $FXoeg = $VFgK2->getPrice(); goto mISa9; fbaOg: if (!isset($NBxeb["\163\x68\x69\x72\x74\156\x65\164\167\x6f\162\x6b"])) { goto FuiQK; } goto wZp88; VHcP4: $GY8E4 += $FXoeg->getUnitPrice() / 10 * $Oh91o; goto fzWQr; OF7qB: so5QI: goto UdbKe; UdbKe: if ($FXoeg->getUnitPrice() >= 10) { goto CS8ra; } goto VHcP4; mISa9: $qbHLP = $NBxeb["\163\x68\x69\x72\x74\x6e\145\x74\x77\x6f\x72\153\x63\157\156\x66\x69\x67"]; goto N9WMR; Sq45b: $Oh91o = $FXoeg->getQuantity(); goto xumwK; IL_aY: IQgXR: goto Fk3qN; Dl3oY: CS8ra: goto A1v0H; xumwK: if (!($W_jAm && $W_jAm->packageUnit > 0)) { goto so5QI; } goto M9J5z; zLsUr: wbG7Y: goto Bu72S; N9WMR: $W_jAm = isset($qbHLP["\x70\162\x6f\x64\x75\x63\x74"]) ? $this->apiClient->getProductById($cxI5Q->getSalesChannelId(), $qbHLP["\x70\x72\157\144\165\143\x74"]) : null; goto Sq45b; M9J5z: $Oh91o = $Oh91o / $W_jAm->packageUnit; goto OF7qB; Fk3qN: } goto WNse2; NQ_Em: goto VTlDL; goto pFrH4; pAMIw: $khUQ4 = 0; goto dnmTj; dnmTj: $GY8E4 = 0; goto n2W3J; TzNEs: $this->orderRepository->delete([["\x69\x64" => $ljj7G->getId()]], $cxI5Q->getContext()); goto Cmox9; wcBBC: $ljj7G = $cxI5Q->getOrder(); goto m0Wu1; Vy_H2: if (!($khUQ4 > 0 || $GY8E4 > 0)) { goto FDS21; } goto yC0pY; yC0pY: $jS_B5 = $this->apiClient->bookCoins($ljj7G->getSalesChannelId(), $khUQ4, $ljj7G->getOrderNumber(), 0, $GY8E4); goto JfilQ; Sb1_4: } }