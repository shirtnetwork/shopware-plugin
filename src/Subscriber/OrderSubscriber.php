<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-01-09 10:23:09              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $X90NJ, EntityRepositoryInterface $b_rl8) { $this->apiClient = $X90NJ; $this->orderRepository = $b_rl8; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\x6f\x6e\x4f\162\x64\145\x72\x57\162\x69\x74\164\145\156"]; } public function onOrderWritten(EntityWrittenEvent $D0f8l) { goto sKJWO; wah_J: vTdYw: goto NW_Th; sKJWO: $HmIug = $D0f8l->getIds(); goto rkalx; rkalx: foreach ($HmIug as $P_VQb) { goto igYc6; F1gAh: $bwjH8 = $this->orderRepository->search($WTjqA, $D0f8l->getContext())->first(); goto v4qzt; JDcPL: P01sz: goto MiHTq; B2Zqe: OldfA: goto l7l4d; iqAjS: $VQ4fr = $this->apiClient->bookCoins($bwjH8->getSalesChannelId(), $FqUf4, $bwjH8->getOrderNumber(), 0, $h8lD7); goto LN2Hz; Gj_Ok: foreach ($rZv1R as $Jsv8R) { goto sLHwj; hmJnQ: $FqUf4 += $Es21D->getQuantity(); goto F3T7o; sWKCR: if (!isset($EJqdZ["\x73\150\151\162\164\156\145\x74\x77\157\162\x6b"])) { goto mjdqA; } goto QE9FK; EOSnk: mjdqA: goto ppF2X; sLHwj: $EJqdZ = $Jsv8R->getPayload(); goto sWKCR; QE9FK: $Es21D = $Jsv8R->getPrice(); goto WsSuA; K8ew3: pE6Gd: goto hmJnQ; KImSf: $h8lD7 = $Es21D->getUnitPrice() / 10 * $Es21D->getQuantity(); goto LhVd0; F3T7o: CBqdJ: goto EOSnk; LhVd0: goto CBqdJ; goto K8ew3; WsSuA: if ($Es21D->getUnitPrice() >= 10) { goto pE6Gd; } goto KImSf; ppF2X: tVOhw: goto S3YvU; S3YvU: } goto krD4W; wmMTQ: if (!($FqUf4 > 0 || $h8lD7 > 0)) { goto rpgp3; } goto iqAjS; v4qzt: $rZv1R = $bwjH8->getLineItems(); goto zjPj7; MiHTq: rpgp3: goto B2Zqe; OrKKT: $h8lD7 = 0; goto Gj_Ok; LN2Hz: if (trim($VQ4fr) != '' && trim($VQ4fr) != "\117\x4b") { goto IBgiK; } goto I_k2e; I_k2e: $this->apiClient->manifestOrder($bwjH8->getSalesChannelId(), $bwjH8); goto RhR_T; krD4W: gsOwu: goto wmMTQ; xfP_4: throw new \Exception("\123\x48\x49\x52\x54\x4e\105\124\127\117\x52\x4b\x5f\103\101\x4e\116\117\x54\137\x4f\x52\x44\x45\122"); goto JDcPL; RhR_T: goto P01sz; goto cCLlT; cCLlT: IBgiK: goto i0g5S; zjPj7: $FqUf4 = 0; goto OrKKT; igYc6: $WTjqA = new Criteria([$P_VQb]); goto RJvDv; RJvDv: $WTjqA->addAssociation("\154\151\156\x65\111\164\x65\155\163"); goto F1gAh; i0g5S: $this->orderRepository->delete([["\x69\144" => $bwjH8->getId()]]); goto xfP_4; l7l4d: } goto wah_J; NW_Th: } }