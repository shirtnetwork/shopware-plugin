<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-16 08:45:14              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $InTPZ, EntityRepository $b2Xbx) { $this->apiClient = $InTPZ; $this->orderRepository = $b2Xbx; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\156\117\162\x64\145\162\120\x6c\x61\143\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $U5PYf) { goto XxL2E; x7WvT: goto JemB0; goto rYS1E; XxL2E: $XXq61 = $U5PYf->getOrder(); goto M4ILb; u2oEs: if (!($xKK5n > 0 || $iopEC > 0)) { goto LTyTJ; } goto SiG1e; MciHO: if (trim($OqSFE) != '' && trim($OqSFE) != "\117\x4b") { goto kv0z1; } goto NUAm5; rYS1E: kv0z1: goto rjwvt; NUAm5: $this->apiClient->manifestOrder($XXq61->getSalesChannelId(), $XXq61); goto x7WvT; ARrE1: throw new \Exception("\123\110\x49\122\124\116\105\124\x57\117\122\113\137\103\101\x4e\116\117\124\x5f\117\122\104\105\x52"); goto qEzgh; le0az: $iopEC = 0; goto djNw4; rjwvt: $this->orderRepository->delete([["\x69\x64" => $XXq61->getId()]]); goto ARrE1; rh0kS: LTyTJ: goto BUKZE; djNw4: foreach ($Wxcd1 as $zuQi4) { goto DOemv; ZbFuY: $i82xs = $zuQi4->getPrice(); goto fSAWM; DOemv: $AIy9n = $zuQi4->getPayload(); goto XjruV; bGBPO: B7X6r: goto sTLnM; fSAWM: if ($i82xs->getUnitPrice() >= 10) { goto qX947; } goto l2WiD; FLVW1: goto B7X6r; goto tmenv; XjruV: if (!isset($AIy9n["\x73\x68\151\162\164\156\145\164\x77\x6f\x72\x6b"])) { goto vPQdq; } goto ZbFuY; tmenv: qX947: goto gn2q7; sTLnM: vPQdq: goto W4tcp; gn2q7: $xKK5n += $i82xs->getQuantity(); goto bGBPO; l2WiD: $iopEC = $i82xs->getUnitPrice() / 10 * $i82xs->getQuantity(); goto FLVW1; W4tcp: uA61s: goto wISGC; wISGC: } goto XCxjV; SiG1e: $OqSFE = $this->apiClient->bookCoins($XXq61->getSalesChannelId(), $xKK5n, $XXq61->getOrderNumber(), 0, $iopEC); goto MciHO; N4vtI: $xKK5n = 0; goto le0az; XCxjV: MlcIx: goto u2oEs; M4ILb: $Wxcd1 = $XXq61->getLineItems(); goto N4vtI; qEzgh: JemB0: goto rh0kS; BUKZE: } }