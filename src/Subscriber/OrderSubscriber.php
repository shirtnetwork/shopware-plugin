<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-07-31 08:07:33              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $km9ue, EntityRepository $zTdLN) { $this->apiClient = $km9ue; $this->orderRepository = $zTdLN; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\156\x4f\x72\144\x65\162\120\x6c\141\143\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $knqSf) { goto G8FMM; c2zHv: $ouBaR = $pm66H->getLineItems(); goto oOOTG; a5pGm: F1GRM: goto Qvipa; ZIsyD: if (trim($XqV2m) != '' && trim($XqV2m) != "\117\113") { goto V1MBf; } goto Tg7jN; BzVYg: goto h09iF; goto hVdJl; hVdJl: V1MBf: goto ZBvpP; Tg7jN: $this->apiClient->manifestOrder($pm66H->getSalesChannelId(), $pm66H); goto BzVYg; a7zlw: h09iF: goto i1nND; Qvipa: if (!($WBwCb > 0 || $h3NhA > 0)) { goto dgMiJ; } goto g1Ios; i1nND: dgMiJ: goto LpYFF; G8FMM: $pm66H = $knqSf->getOrder(); goto c2zHv; yoyVH: foreach ($ouBaR as $c5rZ1) { goto mbkbU; dF8NK: if (!isset($X1s5P["\x73\x68\151\x72\164\x6e\145\x74\167\x6f\162\153"])) { goto d4SDU; } goto qG7d8; BC2rn: d4SDU: goto g1Knc; RPZK2: $h3NhA = $jg5aw->getUnitPrice() / 10 * $jg5aw->getQuantity(); goto EwNvI; qG7d8: $jg5aw = $c5rZ1->getPrice(); goto rEzku; EwNvI: goto Xlspl; goto sLEwC; mbkbU: $X1s5P = $c5rZ1->getPayload(); goto dF8NK; rEzku: if ($jg5aw->getUnitPrice() >= 10) { goto MfZ76; } goto RPZK2; zYN6L: Xlspl: goto BC2rn; sLEwC: MfZ76: goto SeMor; g1Knc: pCLsg: goto IsyEP; SeMor: $WBwCb += $jg5aw->getQuantity(); goto zYN6L; IsyEP: } goto a5pGm; pSf3P: $h3NhA = 0; goto yoyVH; Djesp: throw new \Exception("\123\x48\x49\122\124\116\x45\124\127\117\x52\113\x5f\x43\x41\116\116\x4f\124\137\117\122\x44\105\122"); goto a7zlw; g1Ios: $XqV2m = $this->apiClient->bookCoins($pm66H->getSalesChannelId(), $WBwCb, $pm66H->getOrderNumber(), 0, $h3NhA); goto ZIsyD; ZBvpP: $this->orderRepository->delete([["\x69\x64" => $pm66H->getId()]]); goto Djesp; oOOTG: $WBwCb = 0; goto pSf3P; LpYFF: } }