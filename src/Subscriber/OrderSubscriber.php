<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-01-09 11:24:58              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $uvfWb, EntityRepositoryInterface $ulbVy) { $this->apiClient = $uvfWb; $this->orderRepository = $ulbVy; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\157\x6e\117\162\144\145\162\x57\162\151\x74\164\x65\156"]; } public function onOrderWritten(EntityWrittenEvent $BoiMU) { goto mdZTz; CJexo: wb9Nb: goto L77ao; mdZTz: $rQF7y = $BoiMU->getIds(); goto Ph1xC; Ph1xC: foreach ($rQF7y as $PjZjg) { goto PB4Ja; EqFBb: $this->orderRepository->delete([["\x69\144" => $tky0U->getId()]]); goto jGhzs; mrEsi: $eLZ10 = $this->apiClient->bookCoins($tky0U->getSalesChannelId(), $pa30V, $tky0U->getOrderNumber(), 0, $q3YQe); goto n1vdT; vGa2D: foreach ($yxmQ2 as $ZKmpM) { goto n9frO; kSwpt: $pa30V += $OXH4x->getQuantity(); goto RmjI6; JTPew: $OXH4x = $ZKmpM->getPrice(); goto Gwcrl; Gwcrl: if ($OXH4x->getUnitPrice() >= 10) { goto xhRwf; } goto NUt4g; rdh4D: xhRwf: goto kSwpt; n9frO: $LxsTw = $ZKmpM->getPayload(); goto YLC3R; M83z4: lPDOo: goto k1RUM; Q1pwe: goto dX8SV; goto rdh4D; YLC3R: if (!isset($LxsTw["\163\x68\151\x72\x74\x6e\145\164\x77\157\x72\153"])) { goto lPDOo; } goto JTPew; k1RUM: JVBdF: goto HIaTR; NUt4g: $q3YQe = $OXH4x->getUnitPrice() / 10 * $OXH4x->getQuantity(); goto Q1pwe; RmjI6: dX8SV: goto M83z4; HIaTR: } goto GlGE0; DNsEd: $yxmQ2 = $tky0U->getLineItems(); goto JI01W; KWohI: axayQ: goto EqFBb; PB4Ja: $Y2PJs = new Criteria([$PjZjg]); goto r4uHD; hIqHt: $tky0U = $this->orderRepository->search($Y2PJs, $BoiMU->getContext())->first(); goto DNsEd; en9uf: if (!($pa30V > 0 || $q3YQe > 0)) { goto gE0vf; } goto mrEsi; JI01W: $pa30V = 0; goto YD0Ef; GlGE0: Mc7CP: goto en9uf; jvbA_: $this->apiClient->manifestOrder($tky0U->getSalesChannelId(), $tky0U); goto Lhl8f; wnFEQ: dATu3: goto SFRNO; r4uHD: $Y2PJs->addAssociation("\x6c\151\x6e\145\111\x74\x65\x6d\x73"); goto hIqHt; L7MoG: uDMhx: goto FOxQt; FOxQt: gE0vf: goto wnFEQ; jGhzs: throw new \Exception("\123\110\x49\x52\x54\116\105\124\x57\x4f\x52\x4b\137\x43\x41\x4e\116\x4f\x54\x5f\117\x52\104\x45\x52"); goto L7MoG; n1vdT: if (trim($eLZ10) != '' && trim($eLZ10) != "\x4f\x4b") { goto axayQ; } goto jvbA_; Lhl8f: goto uDMhx; goto KWohI; YD0Ef: $q3YQe = 0; goto vGa2D; SFRNO: } goto CJexo; L77ao: } }