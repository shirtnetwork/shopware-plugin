<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-26 08:55:13              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $dAK14, EntityRepository $C8wFh) { $this->apiClient = $dAK14; $this->orderRepository = $C8wFh; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\x6e\117\162\144\145\162\x50\x6c\141\x63\145\x64"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $bwPJF) { goto LNVYa; KD1VH: $Si1UH = 0; goto hbjYb; Vs10_: goto Vqjau; goto P8AjJ; NTrhJ: if (!($Si1UH > 0 || $w117n > 0)) { goto L8Hb1; } goto RcDpq; h3_iy: if (trim($et0HC) != '' && trim($et0HC) != "\117\113") { goto DIYVg; } goto Y5MPJ; FeFqg: foreach ($umkHu as $lD4L5) { goto eGExx; TNvco: if ($y4C03->getUnitPrice() >= 10) { goto pGmlW; } goto na_Ic; U4VhV: BHKQl: goto zF8U3; EyIyo: pGmlW: goto PNAOS; vQ2OK: $P0_4t = $pGqP7["\x73\150\x69\162\164\156\x65\164\167\x6f\162\x6b\x63\157\156\146\151\147"]; goto FAzKI; kjDgg: JrDUX: goto U4VhV; PNAOS: $Si1UH += $fn18w; goto o0JgP; cXZ3q: goto JtKQy; goto EyIyo; FAzKI: $n1Ci4 = isset($P0_4t["\x70\x72\157\x64\165\x63\164"]) ? $this->apiClient->getProductById($bwPJF->getSalesChannelContext()->getSalesChannelId(), $P0_4t["\160\162\x6f\x64\x75\143\x74"]) : null; goto HLzny; FNUbA: ISiU5: goto TNvco; HLzny: $fn18w = $y4C03->getQuantity(); goto XU_uk; na_Ic: $w117n = $y4C03->getUnitPrice() / 10 * $fn18w; goto cXZ3q; pZUgG: $y4C03 = $lD4L5->getPrice(); goto vQ2OK; XU_uk: if (!($n1Ci4 && $n1Ci4->packageUnit > 0)) { goto ISiU5; } goto Xpc0Q; eGExx: $pGqP7 = $lD4L5->getPayload(); goto eaEOY; Xpc0Q: $fn18w = $fn18w / $n1Ci4->packageUnit; goto FNUbA; eaEOY: if (!isset($pGqP7["\163\x68\151\x72\x74\156\145\x74\x77\157\162\x6b"])) { goto JrDUX; } goto pZUgG; o0JgP: JtKQy: goto kjDgg; zF8U3: } goto mZQle; ZpuJv: throw new \Exception("\x53\110\111\x52\124\116\105\x54\127\117\122\x4b\137\103\x41\x4e\x4e\x4f\124\x5f\x4f\x52\x44\105\122"); goto WW_SS; Y5MPJ: $this->orderRepository->update([["\151\x64" => $G2CUK->getId(), "\143\x75\163\x74\x6f\x6d\x46\x69\x65\154\144\163" => ["\x73\x68\151\162\x74\x6e\145\164\167\157\162\153" => ["\161\x75\x61\x6e\x74\151\x74\x79" => $Si1UH, "\163\165\155" => $w117n]]]], $bwPJF->getContext()); goto Jax53; Z2DSh: $umkHu = $G2CUK->getLineItems(); goto KD1VH; Mz8qf: L8Hb1: goto vmpzO; RcDpq: $et0HC = $this->apiClient->bookCoins($G2CUK->getSalesChannelId(), $Si1UH, $G2CUK->getOrderNumber(), 0, $w117n); goto h3_iy; Jax53: $this->apiClient->manifestOrder($G2CUK->getSalesChannelId(), $G2CUK); goto Vs10_; LNVYa: $G2CUK = $bwPJF->getOrder(); goto Z2DSh; hbjYb: $w117n = 0; goto FeFqg; DZeYp: $this->orderRepository->delete([["\151\x64" => $G2CUK->getId()]], $bwPJF->getContext()); goto ZpuJv; P8AjJ: DIYVg: goto DZeYp; WW_SS: Vqjau: goto Mz8qf; mZQle: DEGtU: goto NTrhJ; vmpzO: } }