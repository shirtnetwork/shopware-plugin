<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2022-12-21 11:51:15              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $KqMaw, EntityRepositoryInterface $Mfrkg) { $this->apiClient = $KqMaw; $this->orderRepository = $Mfrkg; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\157\x6e\117\x72\x64\145\162\127\162\x69\164\x74\145\156"]; } public function onOrderWritten(EntityWrittenEvent $tVF4a) { goto uUvBt; dc3ro: foreach ($BVhGZ as $wt0ea) { goto a0cJn; y_D0N: $SlwMX = 0; goto Ag2tZ; Ag2tZ: foreach ($PEI3M as $AD04E) { goto ISgWZ; WQiNG: vp52r: goto iL92o; ommH4: if ($I0DEu->getUnitPrice() >= 10) { goto szlyx; } goto QtQHq; iL92o: trcJt: goto UIi67; CLqhw: EkRGC: goto WQiNG; ISgWZ: $pSJNu = $AD04E->getPayload(); goto RfUnA; c2MY5: goto EkRGC; goto E0Yog; QtQHq: $SlwMX = $I0DEu->getUnitPrice() / 10 * $I0DEu->getQuantity(); goto c2MY5; Dtchs: $I0DEu = $AD04E->getPrice(); goto ommH4; E0Yog: szlyx: goto ws1ql; ws1ql: $tpqlZ += $I0DEu->getQuantity(); goto CLqhw; RfUnA: if (!isset($pSJNu["\x73\x68\151\162\164\156\145\164\167\157\162\x6b"])) { goto vp52r; } goto Dtchs; UIi67: } goto tUYpN; g_gc2: $PEI3M = $RpIiR->getLineItems(); goto qNTyY; TKMaf: EUgm_: goto pUqJM; QdHCw: if (trim($RKlIG) != '' && trim($RKlIG) != "\117\113") { goto Xl6UZ; } goto AJMh1; z55xr: throw new \Exception("\x53\x48\x49\122\124\116\105\124\127\x4f\x52\x4b\137\103\101\116\x4e\117\124\137\117\122\104\105\x52"); goto jxSan; EciNY: goto fjFov; goto qImFR; pUqJM: dt26w: goto E4OBY; qImFR: Xl6UZ: goto yLRNI; MqtZ9: $RKlIG = $this->apiClient->bookCoins($RpIiR->getSalesChannelId(), $tpqlZ, $RpIiR->getOrderNumber(), 0, $SlwMX); goto QdHCw; x4NMl: if (!($tpqlZ > 0 || $SlwMX > 0)) { goto EUgm_; } goto MqtZ9; qNTyY: $tpqlZ = 0; goto y_D0N; a0cJn: $JxTws = new Criteria([$wt0ea]); goto fpHDP; CQfh4: $RpIiR = $this->orderRepository->search($JxTws, $tVF4a->getContext())->first(); goto g_gc2; fpHDP: $JxTws->addAssociation("\x6c\x69\x6e\145\111\x74\x65\155\x73"); goto CQfh4; yLRNI: $this->orderRepository->delete([["\x69\x64" => $RpIiR->getId()]]); goto z55xr; AJMh1: $this->apiClient->manifestOrder($RpIiR->getSalesChannelId(), $RpIiR); goto EciNY; tUYpN: bCK4M: goto x4NMl; jxSan: fjFov: goto TKMaf; E4OBY: } goto lTXZ_; uUvBt: $BVhGZ = $tVF4a->getIds(); goto dc3ro; lTXZ_: k1HvB: goto cWB2N; cWB2N: } }