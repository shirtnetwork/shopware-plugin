<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.17  |
    |              on 2026-02-20 12:31:48              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $hNnOA, EntityRepository $BUVeB) { $this->apiClient = $hNnOA; $this->orderRepository = $BUVeB; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\x6e\x4f\x72\144\x65\x72\120\154\x61\x63\145\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $ecmEE) { goto QfjOQ; nWbjF: $this->apiClient->manifestOrder($SNAo2->getSalesChannelId(), $SNAo2); goto hqqH1; GZbeU: if (trim($kQKBQ) != '' && trim($kQKBQ) != "\x4f\x4b") { goto aGBrU; } goto TVm2N; QfjOQ: $SNAo2 = $ecmEE->getOrder(); goto sq_Cc; hqqH1: goto qZ32U; goto NFyR4; TVm2N: $this->orderRepository->update([["\x69\x64" => $SNAo2->getId(), "\x63\165\163\x74\x6f\155\x46\x69\x65\154\x64\163" => ["\x73\x68\151\x72\164\156\x65\164\x77\x6f\x72\x6b" => ["\161\x75\x61\156\164\151\x74\x79" => $ozcJO, "\x73\x75\155" => $VsYpH]]]], $ecmEE->getContext()); goto nWbjF; Wx7TY: qZ32U: goto k0jLa; k0jLa: QqIhy: goto t1k24; XIeNg: $this->orderRepository->delete([["\151\x64" => $SNAo2->getId()]], $ecmEE->getContext()); goto KE7Tq; sq_Cc: $rbjbm = $SNAo2->getLineItems(); goto pFflg; cNafK: e3ec1: goto KaaeU; uXv0W: $VsYpH = 0; goto gPvGT; KE7Tq: throw new \Exception("\123\x48\111\122\124\x4e\105\124\127\117\x52\113\137\x43\x41\116\x4e\x4f\124\137\x4f\122\104\x45\122"); goto Wx7TY; gPvGT: foreach ($rbjbm as $bpihA) { goto NX9Hh; XKnRJ: if (!($JPf38 && $JPf38->packageUnit > 0)) { goto Od42J; } goto fU2dv; P3x49: $NdT5E = $QhBEN->getQuantity(); goto XKnRJ; cfTiz: Zel_D: goto p12rL; rtY9t: $ozcJO += $NdT5E; goto MeYXM; vKADG: fjn3t: goto cfTiz; X3vYD: $Fnix4 = $XkAXb["\163\x68\151\162\164\x6e\145\x74\167\157\162\x6b\x63\157\156\x66\x69\x67"]; goto l8jat; jY2xv: $VsYpH += $QhBEN->getUnitPrice() / 10 * $NdT5E; goto Jy1xS; l8jat: $JPf38 = isset($Fnix4["\x70\x72\x6f\x64\x75\x63\x74"]) ? $this->apiClient->getProductById($ecmEE->getSalesChannelId(), $Fnix4["\160\x72\x6f\x64\165\143\x74"]) : null; goto P3x49; MeYXM: wSeXE: goto vKADG; RjjJz: s0Mry: goto rtY9t; Uv9HD: Od42J: goto voNMk; NX9Hh: $XkAXb = $bpihA->getPayload(); goto NLTYv; voNMk: if ($QhBEN->getUnitPrice() >= 10) { goto s0Mry; } goto jY2xv; fU2dv: $NdT5E = $NdT5E / $JPf38->packageUnit; goto Uv9HD; Jy1xS: goto wSeXE; goto RjjJz; NLTYv: if (!isset($XkAXb["\163\150\151\x72\x74\x6e\145\164\167\x6f\x72\x6b"])) { goto fjn3t; } goto BXOFw; BXOFw: $QhBEN = $bpihA->getPrice(); goto X3vYD; p12rL: } goto cNafK; WGSi_: $kQKBQ = $this->apiClient->bookCoins($SNAo2->getSalesChannelId(), $ozcJO, $SNAo2->getOrderNumber(), 0, $VsYpH); goto GZbeU; KaaeU: if (!($ozcJO > 0 || $VsYpH > 0)) { goto QqIhy; } goto WGSi_; NFyR4: aGBrU: goto XIeNg; pFflg: $ozcJO = 0; goto uXv0W; t1k24: } }