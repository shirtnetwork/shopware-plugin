<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-27 09:48:25              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $Izd5f, EntityRepository $V1Csv) { $this->apiClient = $Izd5f; $this->orderRepository = $V1Csv; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\x6e\x4f\162\x64\x65\162\120\154\x61\x63\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $Kdh3u) { goto LTPFC; OV8jf: d6rZZ: goto eMHZe; w_tVk: $this->orderRepository->delete([["\151\x64" => $BSj2n->getId()]], $Kdh3u->getContext()); goto yW9IE; Rhjrs: $eMRCB = 0; goto p0meB; d_1xB: PzzSW: goto TSJpr; p0meB: $hnIik = 0; goto OdUr9; P3q_M: $fY0Rp = $this->apiClient->bookCoins($BSj2n->getSalesChannelId(), $eMRCB, $BSj2n->getOrderNumber(), 0, $hnIik); goto Xalol; nNyhK: RtHY4: goto OV8jf; yW9IE: throw new \Exception("\123\x48\111\122\124\x4e\105\124\x57\117\122\113\137\103\x41\x4e\x4e\117\x54\x5f\x4f\x52\x44\x45\122"); goto nNyhK; sGNU3: $this->orderRepository->update([["\x69\144" => $BSj2n->getId(), "\x63\x75\x73\x74\x6f\x6d\x46\x69\145\x6c\144\x73" => ["\163\x68\151\162\x74\x6e\145\x74\x77\157\162\x6b" => ["\x71\165\141\156\x74\x69\164\171" => $eMRCB, "\163\165\155" => $hnIik]]]], $Kdh3u->getContext()); goto qZo0B; KBQKU: goto RtHY4; goto EfNxn; LTPFC: $BSj2n = $Kdh3u->getOrder(); goto rs9zF; OdUr9: foreach ($VhWJi as $xikzy) { goto Vrhi1; E9atV: $jTPJa = $Md3Oi["\x73\x68\151\162\164\156\145\x74\167\x6f\x72\x6b\x63\x6f\156\x66\151\147"]; goto Ddalz; lraUT: $PJ8RY = $PJ8RY / $LMHL1->packageUnit; goto vdhbl; TqT0g: dqO8w: goto I0GLg; JIOle: cYDQH: goto TqT0g; XaSbb: ck72z: goto JIOle; ceUjV: $PJ8RY = $vTPxs->getQuantity(); goto I2x06; zFifs: if (!isset($Md3Oi["\163\x68\151\x72\x74\156\145\x74\x77\x6f\x72\x6b"])) { goto cYDQH; } goto FRsGA; MElj_: goto ck72z; goto XvjvA; ApK4F: $eMRCB += $PJ8RY; goto XaSbb; olpJ5: $hnIik = $vTPxs->getUnitPrice() / 10 * $PJ8RY; goto MElj_; Ddalz: $LMHL1 = isset($jTPJa["\x70\162\157\144\165\143\x74"]) ? $this->apiClient->getProductById($Kdh3u->getSalesChannelContext()->getSalesChannelId(), $jTPJa["\x70\x72\157\144\165\x63\164"]) : null; goto ceUjV; I2x06: if (!($LMHL1 && $LMHL1->packageUnit > 0)) { goto g44bA; } goto lraUT; FRsGA: $vTPxs = $xikzy->getPrice(); goto E9atV; XvjvA: qs4FL: goto ApK4F; Bux1g: if ($vTPxs->getUnitPrice() >= 10) { goto qs4FL; } goto olpJ5; vdhbl: g44bA: goto Bux1g; Vrhi1: $Md3Oi = $xikzy->getPayload(); goto zFifs; I0GLg: } goto d_1xB; EfNxn: InXgO: goto w_tVk; qZo0B: $this->apiClient->manifestOrder($BSj2n->getSalesChannelId(), $BSj2n); goto KBQKU; Xalol: if (trim($fY0Rp) != '' && trim($fY0Rp) != "\x4f\x4b") { goto InXgO; } goto sGNU3; TSJpr: if (!($eMRCB > 0 || $hnIik > 0)) { goto d6rZZ; } goto P3q_M; rs9zF: $VhWJi = $BSj2n->getLineItems(); goto Rhjrs; eMHZe: } }