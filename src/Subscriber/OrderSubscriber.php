<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.17  |
    |              on 2025-11-18 13:54:06              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $HkwNK, EntityRepository $VSMTD) { $this->apiClient = $HkwNK; $this->orderRepository = $VSMTD; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\x6e\x4f\x72\x64\x65\162\120\154\141\x63\145\x64"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $c_Y3V) { goto X6ZNi; q50fv: $N7PNA = 0; goto hU5da; LOl4R: $mKB78 = $this->apiClient->bookCoins($fobbp->getSalesChannelId(), $N7PNA, $fobbp->getOrderNumber(), 0, $GdDG5); goto xwXle; tcid3: fjMgO: goto gzshj; rLPJk: foreach ($xHWIk as $X8Xmc) { goto LQ0jV; rWKc_: GF3so: goto kn4nd; rflnz: gcxtz: goto Hq2dR; Ps0lO: if (!isset($XEdQl["\x73\x68\151\x72\x74\x6e\x65\x74\167\157\x72\x6b"])) { goto Etbqn; } goto ul4CA; u9QVo: $ry3bO = $XEdQl["\163\x68\151\x72\x74\156\145\164\x77\157\x72\x6b\143\157\x6e\x66\x69\147"]; goto cJeRC; mLZi5: if (!($t9LVJ && $t9LVJ->packageUnit > 0)) { goto gcxtz; } goto iEgO2; cJeRC: $t9LVJ = isset($ry3bO["\x70\x72\x6f\x64\x75\x63\164"]) ? $this->apiClient->getProductById($c_Y3V->getSalesChannelId(), $ry3bO["\x70\162\x6f\144\165\x63\164"]) : null; goto npg8E; iBqOF: md67a: goto GiuNM; GiuNM: $N7PNA += $PvFiQ; goto qBUtA; GwE1z: goto m4CLM; goto iBqOF; LQ0jV: $XEdQl = $X8Xmc->getPayload(); goto Ps0lO; npg8E: $PvFiQ = $M2yzP->getQuantity(); goto mLZi5; Hq2dR: if ($M2yzP->getUnitPrice() >= 10) { goto md67a; } goto B2d7Q; qBUtA: m4CLM: goto Wce8i; B2d7Q: $GdDG5 += $M2yzP->getUnitPrice() / 10 * $PvFiQ; goto GwE1z; Wce8i: Etbqn: goto rWKc_; iEgO2: $PvFiQ = $PvFiQ / $t9LVJ->packageUnit; goto rflnz; ul4CA: $M2yzP = $X8Xmc->getPrice(); goto u9QVo; kn4nd: } goto tcid3; hU5da: $GdDG5 = 0; goto rLPJk; owPtR: $xHWIk = $fobbp->getLineItems(); goto q50fv; xIcBb: $this->orderRepository->delete([["\151\x64" => $fobbp->getId()]], $c_Y3V->getContext()); goto LyUcG; GH_fw: B708r: goto eAeQY; TgnaR: $this->apiClient->manifestOrder($fobbp->getSalesChannelId(), $fobbp); goto aRzwV; X6ZNi: $fobbp = $c_Y3V->getOrder(); goto owPtR; LyUcG: throw new \Exception("\123\110\111\x52\124\x4e\105\124\x57\x4f\x52\113\x5f\x43\x41\x4e\x4e\117\x54\x5f\117\122\x44\105\x52"); goto n9V9v; n9V9v: aFWCn: goto GH_fw; aRzwV: goto aFWCn; goto RuPsh; PAN2S: $this->orderRepository->update([["\x69\144" => $fobbp->getId(), "\x63\165\163\x74\157\155\x46\151\x65\154\x64\163" => ["\x73\x68\151\162\x74\156\x65\x74\x77\x6f\162\x6b" => ["\161\165\141\156\164\x69\164\x79" => $N7PNA, "\x73\165\x6d" => $GdDG5]]]], $c_Y3V->getContext()); goto TgnaR; RuPsh: xmaYm: goto xIcBb; gzshj: if (!($N7PNA > 0 || $GdDG5 > 0)) { goto B708r; } goto LOl4R; xwXle: if (trim($mKB78) != '' && trim($mKB78) != "\117\x4b") { goto xmaYm; } goto PAN2S; eAeQY: } }