<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-02-21 14:30:39              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $kfTVC, EntityRepository $YLAWt) { $this->apiClient = $kfTVC; $this->orderRepository = $YLAWt; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\156\x4f\x72\144\145\x72\120\x6c\141\143\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $crUVT) { goto Nw0zX; oxL8E: $hLwEW = $mrKU_->getLineItems(); goto jSfg7; iPUSS: $VesOT = 0; goto Qm92U; Nw0zX: $mrKU_ = $crUVT->getOrder(); goto oxL8E; pXDC1: throw new \Exception("\x53\x48\x49\x52\124\x4e\105\x54\x57\x4f\x52\x4b\x5f\x43\101\x4e\116\x4f\x54\x5f\117\x52\x44\105\122"); goto KGDki; Qm92U: foreach ($hLwEW as $FWVso) { goto IkzUW; QGq3Q: CvXMX: goto GQIaB; IkzUW: $drdU2 = $FWVso->getPayload(); goto ypGVB; hf403: if ($FeH5K->getUnitPrice() >= 10) { goto PmaBQ; } goto GHFbD; GHFbD: $VesOT = $FeH5K->getUnitPrice() / 10 * $FeH5K->getQuantity(); goto DL3B1; Tq7fy: $FeH5K = $FWVso->getPrice(); goto hf403; mpvSP: PmaBQ: goto TZRJM; GQIaB: tbap4: goto NScnM; ypGVB: if (!isset($drdU2["\163\150\x69\x72\164\156\145\164\167\157\162\153"])) { goto tbap4; } goto Tq7fy; TZRJM: $NRXia += $FeH5K->getQuantity(); goto QGq3Q; DL3B1: goto CvXMX; goto mpvSP; NScnM: gXl6i: goto dvQzI; dvQzI: } goto nAUp7; ZW2ZR: if (!($NRXia > 0 || $VesOT > 0)) { goto Z_iG1; } goto avpYG; Ik6fm: Z_iG1: goto d91Zd; fPiWU: $this->orderRepository->delete([["\x69\144" => $mrKU_->getId()]]); goto pXDC1; D72K2: goto tJ6jy; goto N8T2u; nAUp7: rdLKx: goto ZW2ZR; VIz1O: $this->apiClient->manifestOrder($mrKU_->getSalesChannelId(), $mrKU_); goto D72K2; avpYG: $T6sz0 = $this->apiClient->bookCoins($mrKU_->getSalesChannelId(), $NRXia, $mrKU_->getOrderNumber(), 0, $VesOT); goto fCYh4; N8T2u: YQo63: goto fPiWU; fCYh4: if (trim($T6sz0) != '' && trim($T6sz0) != "\117\x4b") { goto YQo63; } goto VIz1O; KGDki: tJ6jy: goto Ik6fm; jSfg7: $NRXia = 0; goto iPUSS; d91Zd: } }