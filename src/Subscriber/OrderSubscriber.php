<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.17  |
    |              on 2026-02-20 12:32:31              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $V5NcJ, EntityRepository $KQACf) { $this->apiClient = $V5NcJ; $this->orderRepository = $KQACf; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\156\x4f\162\x64\x65\162\120\x6c\141\143\x65\x64"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $Vq4fu) { goto YL4TX; q6lA2: foreach ($Idm_U as $Pqujj) { goto wOZcC; nymMO: $EFzEI = $jma1J->getQuantity(); goto IDr24; aqeGR: pUEsa: goto P7vf3; ZM5IY: nn_wR: goto F3EUt; AfhL7: $gMont = $tnCsh["\163\150\151\162\x74\156\145\164\167\x6f\162\153\x63\x6f\156\x66\x69\x67"]; goto xpH92; sYZIp: goto Wf9j5; goto cl8w6; wOZcC: $tnCsh = $Pqujj->getPayload(); goto HoSpO; xpH92: $KD_nc = isset($gMont["\x70\x72\157\144\x75\x63\164"]) ? $this->apiClient->getProductById($Vq4fu->getSalesChannelId(), $gMont["\160\162\x6f\x64\165\143\x74"]) : null; goto nymMO; P7vf3: if ($jma1J->getUnitPrice() >= 10) { goto x7OpB; } goto LWkNM; SaADw: $jma1J = $Pqujj->getPrice(); goto AfhL7; P4NTN: Wf9j5: goto ZM5IY; HoSpO: if (!isset($tnCsh["\163\150\x69\162\x74\156\x65\x74\167\157\162\x6b"])) { goto nn_wR; } goto SaADw; LWkNM: $Qa6fn += $jma1J->getUnitPrice() / 10 * $EFzEI; goto sYZIp; IDr24: if (!($KD_nc && $KD_nc->packageUnit > 0)) { goto pUEsa; } goto XRHCc; XRHCc: $EFzEI = $EFzEI / $KD_nc->packageUnit; goto aqeGR; SPiSG: $sCZNC += $EFzEI; goto P4NTN; cl8w6: x7OpB: goto SPiSG; F3EUt: uvQnv: goto UapK5; UapK5: } goto vpIoH; HabpE: $sCZNC = 0; goto G2_wr; hzRGm: if (trim($xhH8R) != '' && trim($xhH8R) != "\x4f\113") { goto ILdwx; } goto gZnJC; qUnn2: throw new \Exception("\123\110\111\x52\x54\x4e\x45\x54\127\117\122\x4b\x5f\103\x41\116\116\x4f\124\x5f\x4f\x52\104\105\x52"); goto e9Zkh; kcYWq: LyB7N: goto WBnM4; e9Zkh: TIoIb: goto kcYWq; G2_wr: $Qa6fn = 0; goto q6lA2; TdMPl: goto TIoIb; goto H0VV1; NQHt1: if (!($sCZNC > 0 || $Qa6fn > 0)) { goto LyB7N; } goto pGLQd; xuMKx: $Idm_U = $K9_Df->getLineItems(); goto HabpE; YL4TX: $K9_Df = $Vq4fu->getOrder(); goto xuMKx; vpIoH: dHhL9: goto NQHt1; ggtaS: $this->apiClient->manifestOrder($K9_Df->getSalesChannelId(), $K9_Df); goto TdMPl; gZnJC: $this->orderRepository->update([["\x69\144" => $K9_Df->getId(), "\143\165\163\x74\x6f\155\106\151\145\x6c\144\x73" => ["\163\x68\151\x72\164\156\145\164\167\157\162\x6b" => ["\x71\x75\141\156\164\151\x74\x79" => $sCZNC, "\x73\x75\x6d" => $Qa6fn]]]], $Vq4fu->getContext()); goto ggtaS; H0VV1: ILdwx: goto jzHhu; jzHhu: $this->orderRepository->delete([["\x69\x64" => $K9_Df->getId()]], $Vq4fu->getContext()); goto qUnn2; pGLQd: $xhH8R = $this->apiClient->bookCoins($K9_Df->getSalesChannelId(), $sCZNC, $K9_Df->getOrderNumber(), 0, $Qa6fn); goto hzRGm; WBnM4: } }