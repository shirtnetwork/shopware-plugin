<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.17  |
    |              on 2025-11-10 15:17:41              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $OMNVn, EntityRepository $sLiKb) { $this->apiClient = $OMNVn; $this->orderRepository = $sLiKb; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\x6e\117\x72\x64\145\x72\x50\154\141\143\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $ykj3x) { goto WxbJ7; TAXRr: $QdOQC = 0; goto HD94f; C3Iq6: ek_7z: goto eEQ3x; KE0ms: if (trim($k2EI0) != '' && trim($k2EI0) != "\117\113") { goto v0dQV; } goto TQKQa; HD94f: $fHUo1 = 0; goto qpuOa; TQKQa: $this->orderRepository->update([["\x69\x64" => $QorSh->getId(), "\143\x75\163\x74\157\x6d\x46\151\145\x6c\144\163" => ["\163\150\x69\x72\164\x6e\145\x74\x77\157\x72\x6b" => ["\x71\x75\x61\x6e\x74\x69\x74\171" => $QdOQC, "\x73\x75\155" => $fHUo1]]]], $ykj3x->getContext()); goto uPjhk; FfK4U: throw new \Exception("\x53\x48\111\x52\x54\x4e\x45\124\127\x4f\x52\x4b\137\x43\101\x4e\116\117\124\x5f\x4f\122\104\105\x52"); goto C3Iq6; GomIF: $k2EI0 = $this->apiClient->bookCoins($QorSh->getSalesChannelId(), $QdOQC, $QorSh->getOrderNumber(), 0, $fHUo1); goto KE0ms; Ie1n8: $this->orderRepository->delete([["\151\x64" => $QorSh->getId()]], $ykj3x->getContext()); goto FfK4U; M2JOk: if (!($QdOQC > 0 || $fHUo1 > 0)) { goto w0LjR; } goto GomIF; D7XZM: XvvS3: goto M2JOk; WxbJ7: $QorSh = $ykj3x->getOrder(); goto ZtBEY; OtQBJ: goto ek_7z; goto MoQd0; MoQd0: v0dQV: goto Ie1n8; ZtBEY: $GlXrQ = $QorSh->getLineItems(); goto TAXRr; qpuOa: foreach ($GlXrQ as $qQIFY) { goto wsNiu; bfUte: if ($Uz6gC->getUnitPrice() >= 10) { goto lvH32; } goto CMRBs; jEhDT: CLq5J: goto bfUte; Y88ZC: fcsly: goto FkrRQ; CMRBs: $fHUo1 += $Uz6gC->getUnitPrice() / 10 * $ZTpCo; goto nA0Ie; afQ8r: $ZTpCo = $Uz6gC->getQuantity(); goto Bv59c; Bv59c: if (!($LliM9 && $LliM9->packageUnit > 0)) { goto CLq5J; } goto F540z; UowIz: if (!isset($NCMMv["\163\150\x69\x72\x74\x6e\x65\164\x77\157\x72\153"])) { goto KfKMe; } goto Eh9ry; x3oR3: vvLfT: goto FjHle; DbfJQ: $LliM9 = isset($H6NJ7["\x70\x72\157\x64\x75\143\x74"]) ? $this->apiClient->getProductById($ykj3x->getSalesChannelId(), $H6NJ7["\x70\162\157\144\x75\143\164"]) : null; goto afQ8r; lWNX9: lvH32: goto Q78m3; Eh9ry: $Uz6gC = $qQIFY->getPrice(); goto tVeSI; nA0Ie: goto fcsly; goto lWNX9; tVeSI: $H6NJ7 = $NCMMv["\x73\x68\151\162\x74\156\x65\x74\x77\157\162\153\143\x6f\x6e\x66\x69\147"]; goto DbfJQ; FkrRQ: KfKMe: goto x3oR3; wsNiu: $NCMMv = $qQIFY->getPayload(); goto UowIz; Q78m3: $QdOQC += $ZTpCo; goto Y88ZC; F540z: $ZTpCo = $ZTpCo / $LliM9->packageUnit; goto jEhDT; FjHle: } goto D7XZM; uPjhk: $this->apiClient->manifestOrder($QorSh->getSalesChannelId(), $QorSh); goto OtQBJ; eEQ3x: w0LjR: goto iAz2z; iAz2z: } }