<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-08-01 14:22:47              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $HKEeH, EntityRepository $YzELc) { $this->apiClient = $HKEeH; $this->orderRepository = $YzELc; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\156\x4f\162\x64\145\162\x50\154\x61\x63\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $s7KBk) { goto KRZcN; cziGS: foreach ($od1Nk as $sXPuA) { goto zoqLw; n16uI: zHabe: goto mGTNf; mGTNf: ThoG1: goto S2NdB; Kzkpz: if ($V3U2i->getUnitPrice() >= 10) { goto HQUCj; } goto hvztP; vtPwE: $V3U2i = $sXPuA->getPrice(); goto Kzkpz; KOF_o: goto zHabe; goto aPjG_; hJhlS: $iAh6e += $V3U2i->getQuantity(); goto n16uI; hvztP: $A1owl = $V3U2i->getUnitPrice() / 10 * $V3U2i->getQuantity(); goto KOF_o; aPjG_: HQUCj: goto hJhlS; S2NdB: uCa8k: goto f5tvV; vnz6s: if (!isset($I5p7g["\163\x68\151\162\x74\x6e\145\164\167\x6f\162\x6b"])) { goto ThoG1; } goto vtPwE; zoqLw: $I5p7g = $sXPuA->getPayload(); goto vnz6s; f5tvV: } goto IzKn6; oH2JD: $A1owl = 0; goto cziGS; IzKn6: yBRX4: goto Bxml1; xf2W8: $od1Nk = $e5d0R->getLineItems(); goto qP68L; qP68L: $iAh6e = 0; goto oH2JD; GL__q: goto Js3e_; goto O9la7; O9la7: EST4H: goto dbZGx; YJcyU: CtoUd: goto HLmYi; vwDmk: throw new \Exception("\x53\x48\x49\x52\x54\116\x45\x54\127\117\x52\x4b\137\103\x41\x4e\116\117\124\x5f\117\x52\104\x45\122"); goto FiMGZ; ti4as: $this->apiClient->manifestOrder($e5d0R->getSalesChannelId(), $e5d0R); goto GL__q; fInjP: $fwQYK = $this->apiClient->bookCoins($e5d0R->getSalesChannelId(), $iAh6e, $e5d0R->getOrderNumber(), 0, $A1owl); goto EJ7ab; FiMGZ: Js3e_: goto YJcyU; Bxml1: if (!($iAh6e > 0 || $A1owl > 0)) { goto CtoUd; } goto fInjP; KRZcN: $e5d0R = $s7KBk->getOrder(); goto xf2W8; EJ7ab: if (trim($fwQYK) != '' && trim($fwQYK) != "\x4f\x4b") { goto EST4H; } goto ti4as; dbZGx: $this->orderRepository->delete([["\151\144" => $e5d0R->getId()]]); goto vwDmk; HLmYi: } }