<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-10-09 12:20:07              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $oL1mC, EntityRepository $kK11N) { $this->apiClient = $oL1mC; $this->orderRepository = $kK11N; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\x6e\117\162\x64\145\x72\x50\154\141\x63\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $xPtSF) { goto TWBuB; TWBuB: $jhoRW = $xPtSF->getOrder(); goto AqaxW; Q2kEI: LgDfk: goto C2wCZ; aCkj7: m1Mhn: goto Qm1ht; F_nqN: if (trim($uGE6r) != '' && trim($uGE6r) != "\x4f\113") { goto YferT; } goto lX0Lr; oeBXW: $uGE6r = $this->apiClient->bookCoins($jhoRW->getSalesChannelId(), $Z5KTS, $jhoRW->getOrderNumber(), 0, $eo6t0); goto F_nqN; lCj2L: $eo6t0 = 0; goto LrOwN; neapp: goto EuzPm; goto L63wL; qR5e0: throw new \Exception("\123\x48\x49\122\x54\116\105\124\127\x4f\x52\113\x5f\x43\x41\x4e\116\x4f\124\137\117\x52\104\105\x52"); goto EY3i9; lX0Lr: $this->apiClient->manifestOrder($jhoRW->getSalesChannelId(), $jhoRW); goto neapp; IiC7A: $this->orderRepository->delete([["\x69\x64" => $jhoRW->getId()]]); goto qR5e0; EY3i9: EuzPm: goto Q2kEI; LrOwN: foreach ($GhzGU as $Fm_aM) { goto sKgpU; vli_r: goto kOABr; goto j1M5u; GGdKo: $Z5KTS += $kqkEZ->getQuantity(); goto ClxPe; Vnz13: gfxcB: goto kkHUK; kkHUK: wiWrU: goto syvL_; oKR_6: $kqkEZ = $Fm_aM->getPrice(); goto GpuP4; sKgpU: $xI5c7 = $Fm_aM->getPayload(); goto POsbX; j1M5u: qVd6B: goto GGdKo; GpuP4: if ($kqkEZ->getUnitPrice() >= 10) { goto qVd6B; } goto DG_NO; DG_NO: $eo6t0 = $kqkEZ->getUnitPrice() / 10 * $kqkEZ->getQuantity(); goto vli_r; POsbX: if (!isset($xI5c7["\x73\x68\151\x72\x74\x6e\145\x74\x77\157\x72\153"])) { goto gfxcB; } goto oKR_6; ClxPe: kOABr: goto Vnz13; syvL_: } goto aCkj7; Qm1ht: if (!($Z5KTS > 0 || $eo6t0 > 0)) { goto LgDfk; } goto oeBXW; SF8Cd: $Z5KTS = 0; goto lCj2L; L63wL: YferT: goto IiC7A; AqaxW: $GhzGU = $jhoRW->getLineItems(); goto SF8Cd; C2wCZ: } }