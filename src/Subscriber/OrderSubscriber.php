<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-01-09 09:26:39              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $dTer1, EntityRepositoryInterface $YdTtM) { $this->apiClient = $dTer1; $this->orderRepository = $YdTtM; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\x6f\156\117\x72\144\145\x72\127\162\x69\x74\164\145\x6e"]; } public function onOrderWritten(EntityWrittenEvent $oC3s2) { goto qZyUd; qZyUd: $xIdBF = $oC3s2->getIds(); goto isdd5; tQpdv: Jr3SB: goto ARE2Q; isdd5: foreach ($xIdBF as $JbajN) { goto dKxpC; EqR90: $L3wUR->addAssociation("\x6c\x69\156\x65\111\164\x65\x6d\x73"); goto kT9Sq; Ho10q: gApb7: goto iQo2M; RSvWs: XThuv: goto QQLSv; shBEQ: I91vR: goto qIF1D; R0TBC: iP8Et: goto Rckcm; CG4La: $this->apiClient->manifestOrder($BtfqF->getSalesChannelId(), $BtfqF); goto stBj7; HF11J: $nJHU3 = $BtfqF->getLineItems(); goto mvX7l; qIF1D: $this->orderRepository->delete([["\151\x64" => $BtfqF->getId()]]); goto syRzJ; OdhVL: $UPOP6 = $this->apiClient->bookCoins($BtfqF->getSalesChannelId(), $wiDhS, $BtfqF->getOrderNumber(), 0, $vMDdC); goto e11UN; e11UN: if (trim($UPOP6) != '' && trim($UPOP6) != "\x4f\x4b") { goto I91vR; } goto CG4La; kT9Sq: $BtfqF = $this->orderRepository->search($L3wUR, $oC3s2->getContext())->first(); goto HF11J; dKxpC: $L3wUR = new Criteria([$JbajN]); goto EqR90; mvX7l: $wiDhS = 0; goto GfQG5; GfQG5: $vMDdC = 0; goto fvCCq; iQo2M: bxlbZ: goto RSvWs; Rckcm: if (!($wiDhS > 0 || $vMDdC > 0)) { goto bxlbZ; } goto OdhVL; syRzJ: throw new \Exception("\x53\x48\x49\122\x54\116\105\x54\x57\117\122\113\x5f\x43\101\116\x4e\x4f\124\137\117\x52\x44\105\122"); goto Ho10q; fvCCq: foreach ($nJHU3 as $PF5P1) { goto zMxSz; zMxSz: $IjoWD = $PF5P1->getPayload(); goto TwIyA; D3SVk: XnX1Y: goto Y3fjf; EJvzN: if ($W5Jkc->getUnitPrice() >= 10) { goto XP2gs; } goto NOo6h; ZNEFu: tQ8YI: goto DDt1B; UYecc: goto XnX1Y; goto uwrpx; NOo6h: $vMDdC = $W5Jkc->getUnitPrice() / 10 * $W5Jkc->getQuantity(); goto UYecc; uwrpx: XP2gs: goto j1TXy; j1TXy: $wiDhS += $W5Jkc->getQuantity(); goto D3SVk; hNkPF: $W5Jkc = $PF5P1->getPrice(); goto EJvzN; Y3fjf: vkR9G: goto ZNEFu; TwIyA: if (!isset($IjoWD["\163\150\x69\x72\x74\x6e\145\x74\167\157\162\153"])) { goto vkR9G; } goto hNkPF; DDt1B: } goto R0TBC; stBj7: goto gApb7; goto shBEQ; QQLSv: } goto tQpdv; ARE2Q: } }