<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-14 17:23:11              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $xMx8i, EntityRepository $PgDtV) { $this->apiClient = $xMx8i; $this->orderRepository = $PgDtV; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\156\x4f\162\144\145\x72\x50\154\141\143\145\x64"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $NTs4y) { goto lP8Uc; p7eqY: abetT: goto xX2VL; EsAwa: $UT6Tj = $this->apiClient->bookCoins($lVfbE->getSalesChannelId(), $XiR41, $lVfbE->getOrderNumber(), 0, $zSS2t); goto HzJBs; R69tH: throw new \Exception("\x53\x48\x49\x52\x54\x4e\x45\124\127\x4f\122\x4b\x5f\x43\x41\116\x4e\x4f\x54\137\117\x52\x44\105\x52"); goto VYjeR; VYjeR: D52vA: goto EaR47; yJmib: $zSS2t = 0; goto UmQez; rlTMN: u7Rbu: goto rgfDk; UmQez: foreach ($DWQDu as $rjdEW) { goto TPG0s; TFvIH: $XiR41 += $peFyd->getQuantity(); goto KyYDX; U6QBj: $peFyd = $rjdEW->getPrice(); goto OMk49; OMk49: if ($peFyd->getUnitPrice() >= 10) { goto HdsLo; } goto d2DKY; gQpHG: if (!isset($EXtkz["\x73\150\x69\x72\x74\156\145\x74\167\157\x72\153"])) { goto QpBn0; } goto U6QBj; bO4PH: AAf0z: goto ZCaDX; vi__3: QpBn0: goto bO4PH; hCpJ8: HdsLo: goto TFvIH; KyYDX: B0bAq: goto vi__3; d2DKY: $zSS2t = $peFyd->getUnitPrice() / 10 * $peFyd->getQuantity(); goto tKOFK; tKOFK: goto B0bAq; goto hCpJ8; TPG0s: $EXtkz = $rjdEW->getPayload(); goto gQpHG; ZCaDX: } goto p7eqY; HzJBs: if (trim($UT6Tj) != '' && trim($UT6Tj) != "\x4f\x4b") { goto u7Rbu; } goto NOn9z; Nqs53: goto D52vA; goto rlTMN; EaR47: onDvZ: goto oVthu; rgfDk: $this->orderRepository->delete([["\151\x64" => $lVfbE->getId()]], $NTs4y->getContext()); goto R69tH; NOn9z: $this->apiClient->manifestOrder($lVfbE->getSalesChannelId(), $lVfbE); goto Nqs53; xX2VL: if (!($XiR41 > 0 || $zSS2t > 0)) { goto onDvZ; } goto EsAwa; lP8Uc: $lVfbE = $NTs4y->getOrder(); goto ARKPu; YgF7D: $XiR41 = 0; goto yJmib; ARKPu: $DWQDu = $lVfbE->getLineItems(); goto YgF7D; oVthu: } }