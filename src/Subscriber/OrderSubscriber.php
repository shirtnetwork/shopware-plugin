<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2022-12-09 11:30:04              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $A5taj, EntityRepositoryInterface $gUY1j) { $this->apiClient = $A5taj; $this->orderRepository = $gUY1j; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\x6f\x6e\117\162\144\x65\162\127\162\151\164\x74\145\156"]; } public function onOrderWritten(EntityWrittenEvent $hDyN9) { goto fvq9e; qKY9y: foreach ($sKOOH as $syIvp) { goto rRWUw; XdNnW: $this->apiClient->manifestOrder($vVbys->getSalesChannelId(), $vVbys); goto IhyJ2; rRWUw: $uYZWY = new Criteria([$syIvp]); goto xBH5_; PZUxn: if (!($AXvCD > 0 || $FVe2k > 0)) { goto sS13t; } goto TGPe2; eCvPS: sS13t: goto IHdrQ; SlVjk: FFlFo: goto eCvPS; IhyJ2: goto FFlFo; goto vkGKW; xBH5_: $uYZWY->addAssociation("\154\x69\156\x65\x49\164\x65\155\163"); goto mnalq; fzkQ4: $FVe2k = 0; goto ZWV1Z; EB_eG: $AXvCD = 0; goto fzkQ4; TGPe2: $H43z6 = $this->apiClient->bookCoins($vVbys->getSalesChannelId(), $AXvCD, $vVbys->getOrderNumber(), 0, $FVe2k); goto xrQYP; vkGKW: pDz45: goto ZM4XB; bXtJB: throw new \Exception("\123\110\x49\x52\x54\116\105\x54\127\x4f\x52\x4b\x5f\103\101\116\x4e\117\124\x5f\x4f\x52\104\105\122"); goto SlVjk; ZM4XB: $this->orderRepository->delete([["\151\144" => $vVbys->getId()]]); goto bXtJB; IHdrQ: rgNSf: goto ptCVj; mnalq: $vVbys = $this->orderRepository->search($uYZWY, $hDyN9->getContext())->first(); goto ZFw3f; xrQYP: if (trim($H43z6) != '' && trim($H43z6) != "\117\x4b") { goto pDz45; } goto XdNnW; RPKV3: hUgzI: goto PZUxn; ZFw3f: $qO6yx = $vVbys->getLineItems(); goto EB_eG; ZWV1Z: foreach ($qO6yx as $Pab1F) { goto v2bVM; b5Mpe: mdx1O: goto Vdsqn; OUQAc: if (!isset($wTVXM["\x73\x68\151\x72\164\x6e\145\164\x77\157\x72\153"])) { goto mdx1O; } goto Jle2B; v2bVM: $wTVXM = $Pab1F->getPayload(); goto OUQAc; Jle2B: $b6xPk = $Pab1F->getPrice(); goto PduBE; ALmpP: xaSJJ: goto UxxGd; QR6yO: $FVe2k = $b6xPk->getUnitPrice() / 10 * $b6xPk->getQuantity(); goto eaCWf; PduBE: if ($b6xPk->getUnitPrice() >= 10) { goto xaSJJ; } goto QR6yO; leYFH: UcUUr: goto b5Mpe; UxxGd: $AXvCD += $b6xPk->getQuantity(); goto leYFH; eaCWf: goto UcUUr; goto ALmpP; Vdsqn: k6MPP: goto w1fPb; w1fPb: } goto RPKV3; ptCVj: } goto A0b4X; fvq9e: $sKOOH = $hDyN9->getIds(); goto qKY9y; A0b4X: G4kjW: goto pjmYc; pjmYc: } }