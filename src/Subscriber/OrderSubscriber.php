<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-03-07 11:57:36              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $r0XdE, EntityRepositoryInterface $DWeTk) { $this->apiClient = $r0XdE; $this->orderRepository = $DWeTk; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\156\x4f\x72\x64\145\162\x50\x6c\x61\x63\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $DlFmm) { goto bGPq6; W4xEb: goto CZwnW; goto uNYog; RZxbr: $vNhKr = $vlFc4->getLineItems(); goto DrzTA; jjfbQ: $WS_T1 = 0; goto cSoM4; oAGIy: if (trim($cntd6) != '' && trim($cntd6) != "\117\113") { goto Ft6Ao; } goto tuFsq; DrzTA: $SITBs = 0; goto jjfbQ; nMfmJ: koSJ8: goto NJaoN; tuFsq: $this->apiClient->manifestOrder($vlFc4->getSalesChannelId(), $vlFc4); goto W4xEb; LsDqy: CZwnW: goto Z3Bab; DRcc7: throw new \Exception("\123\x48\x49\x52\124\x4e\105\124\x57\117\122\113\137\103\101\x4e\x4e\117\124\x5f\117\x52\104\105\x52"); goto LsDqy; svueH: $this->orderRepository->delete([["\151\144" => $vlFc4->getId()]]); goto DRcc7; uNYog: Ft6Ao: goto svueH; NJaoN: if (!($SITBs > 0 || $WS_T1 > 0)) { goto znkip; } goto c5K8K; c5K8K: $cntd6 = $this->apiClient->bookCoins($vlFc4->getSalesChannelId(), $SITBs, $vlFc4->getOrderNumber(), 0, $WS_T1); goto oAGIy; cSoM4: foreach ($vNhKr as $bfkSm) { goto dbFQE; oQkUc: $Z_eDq = $bfkSm->getPrice(); goto CmtqW; sk5TP: dxOJQ: goto Aj6EH; ldDJF: Tq6TT: goto sk5TP; mXb3N: $WS_T1 = $Z_eDq->getUnitPrice() / 10 * $Z_eDq->getQuantity(); goto gdaho; Pmmnm: $SITBs += $Z_eDq->getQuantity(); goto ldDJF; IO0FN: KLFXG: goto Pmmnm; gdaho: goto Tq6TT; goto IO0FN; dbFQE: $dUhvP = $bfkSm->getPayload(); goto akEVY; Aj6EH: gQp7Z: goto J4znI; CmtqW: if ($Z_eDq->getUnitPrice() >= 10) { goto KLFXG; } goto mXb3N; akEVY: if (!isset($dUhvP["\163\x68\x69\162\164\x6e\x65\164\167\157\162\x6b"])) { goto dxOJQ; } goto oQkUc; J4znI: } goto nMfmJ; Z3Bab: znkip: goto Rjszc; bGPq6: $vlFc4 = $DlFmm->getOrder(); goto RZxbr; Rjszc: } }