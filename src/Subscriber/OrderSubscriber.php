<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-08-14 11:43:26              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $SWKRp, EntityRepository $wfX_6) { $this->apiClient = $SWKRp; $this->orderRepository = $wfX_6; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\156\117\162\x64\x65\x72\120\154\x61\x63\x65\x64"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $Y3K0b) { goto zDR87; gZX7w: JoqHT: goto Q6nEe; glCBt: throw new \Exception("\123\110\111\122\124\116\x45\x54\127\x4f\x52\x4b\137\103\101\116\x4e\x4f\124\137\x4f\122\104\105\x52"); goto gZX7w; AK7Qp: foreach ($O1vs4 as $hE2Zq) { goto wk45Y; srZj9: $Cn91D = $ulYix->getUnitPrice() / 10 * $ulYix->getQuantity(); goto q878n; wvfLo: if ($ulYix->getUnitPrice() >= 10) { goto Cf9cU; } goto srZj9; wk45Y: $jaf5b = $hE2Zq->getPayload(); goto j1kYg; q878n: goto OX8Uo; goto wFNO8; Y0RED: OX8Uo: goto htq4L; xUOIY: $ulYix = $hE2Zq->getPrice(); goto wvfLo; htq4L: hqrs1: goto p8CXI; p8CXI: GuX81: goto p1kRj; Gy568: $a_r6v += $ulYix->getQuantity(); goto Y0RED; wFNO8: Cf9cU: goto Gy568; j1kYg: if (!isset($jaf5b["\163\x68\151\x72\x74\x6e\x65\x74\x77\157\162\153"])) { goto hqrs1; } goto xUOIY; p1kRj: } goto zYHEe; zDR87: $ZsE_Q = $Y3K0b->getOrder(); goto Yr_yJ; zYHEe: WDLsP: goto MdDy6; gOkB8: $a_r6v = 0; goto XriUF; Q6nEe: EQaix: goto Y7Etb; NPkn5: $this->apiClient->manifestOrder($ZsE_Q->getSalesChannelId(), $ZsE_Q); goto NqYsE; MdDy6: if (!($a_r6v > 0 || $Cn91D > 0)) { goto EQaix; } goto dDq1b; J8KIH: q5vbS: goto UUjdm; NqYsE: goto JoqHT; goto J8KIH; UUjdm: $this->orderRepository->delete([["\x69\x64" => $ZsE_Q->getId()]]); goto glCBt; Yr_yJ: $O1vs4 = $ZsE_Q->getLineItems(); goto gOkB8; eVwQO: if (trim($COoHB) != '' && trim($COoHB) != "\x4f\113") { goto q5vbS; } goto NPkn5; XriUF: $Cn91D = 0; goto AK7Qp; dDq1b: $COoHB = $this->apiClient->bookCoins($ZsE_Q->getSalesChannelId(), $a_r6v, $ZsE_Q->getOrderNumber(), 0, $Cn91D); goto eVwQO; Y7Etb: } }