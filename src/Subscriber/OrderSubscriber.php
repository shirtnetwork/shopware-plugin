<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-01-09 12:54:13              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $U6gpQ, EntityRepositoryInterface $CEFHj) { $this->apiClient = $U6gpQ; $this->orderRepository = $CEFHj; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\157\x6e\117\162\x64\x65\x72\x57\162\x69\x74\164\145\x6e"]; } public function onOrderWritten(EntityWrittenEvent $KCoU9) { goto QkLcd; LyDKF: I2fui: goto fwg9h; lArv_: foreach ($pKY1i as $UeaYm) { goto IPant; d6ayf: vxNOJ: goto mEIu1; IPant: $FH0fg = new Criteria([$UeaYm]); goto iRRLq; hdVnC: $iPlzf = 0; goto S70vQ; yHb8P: if (trim($tEV6U) != '' && trim($tEV6U) != "\117\x4b") { goto d10h0; } goto oX9yn; S70vQ: foreach ($X9wmm as $VqEKY) { goto kImIB; UEME7: FQYAs: goto VPmgs; FauLJ: $Js70m = $VqEKY->getPrice(); goto gzzGo; EjFoq: SG6gI: goto piPYS; wkmqC: bK_WT: goto UEyCZ; kImIB: $Yencx = $VqEKY->getPayload(); goto YEQ7c; a8TTz: $iPlzf = $Js70m->getUnitPrice() / 10 * $Js70m->getQuantity(); goto eT8UW; VPmgs: Z_JSF: goto wkmqC; piPYS: $TVXrM += $Js70m->getQuantity(); goto UEME7; eT8UW: goto FQYAs; goto EjFoq; gzzGo: if ($Js70m->getUnitPrice() >= 10) { goto SG6gI; } goto a8TTz; YEQ7c: if (!isset($Yencx["\163\x68\151\x72\164\156\x65\164\167\157\x72\153"])) { goto Z_JSF; } goto FauLJ; UEyCZ: } goto d6ayf; mw2vC: Rbegl: goto AfgSA; xcZOc: $tEV6U = $this->apiClient->bookCoins($Seq08->getSalesChannelId(), $TVXrM, $Seq08->getOrderNumber(), 0, $iPlzf); goto yHb8P; sDZ_O: goto Rbegl; goto stxH9; oX9yn: $this->apiClient->manifestOrder($Seq08->getSalesChannelId(), $Seq08); goto sDZ_O; da28q: $this->orderRepository->delete([["\151\x64" => $Seq08->getId()]]); goto TcMEX; stxH9: d10h0: goto da28q; mEIu1: if (!($TVXrM > 0 || $iPlzf > 0)) { goto Gi3El; } goto xcZOc; T_BXR: $X9wmm = $Seq08->getLineItems(); goto uQSnM; I0gHG: $Seq08 = $this->orderRepository->search($FH0fg, $KCoU9->getContext())->first(); goto T_BXR; AfgSA: Gi3El: goto SNC0M; uQSnM: $TVXrM = 0; goto hdVnC; SNC0M: IdKR7: goto lO7Xj; iRRLq: $FH0fg->addAssociation("\154\x69\x6e\x65\111\164\x65\155\163"); goto I0gHG; TcMEX: throw new \Exception("\123\110\111\x52\x54\116\x45\124\127\x4f\x52\x4b\137\x43\101\116\116\x4f\124\137\117\122\104\x45\122"); goto mw2vC; lO7Xj: } goto LyDKF; QkLcd: $pKY1i = $KCoU9->getIds(); goto lArv_; fwg9h: } }