<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2022-12-01 13:07:55              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $Bhx3k, EntityRepositoryInterface $HWzpo) { $this->apiClient = $Bhx3k; $this->orderRepository = $HWzpo; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\157\156\117\162\x64\145\162\127\162\151\164\164\x65\156"]; } public function onOrderWritten(EntityWrittenEvent $kVGEo) { goto Yss_o; Yss_o: $ahGiv = $kVGEo->getIds(); goto MV2P7; MV2P7: foreach ($ahGiv as $rjJGv) { goto hr0J6; oB9Ox: EiBDK: goto yYhpi; xGQCT: $this->orderRepository->delete([["\x69\144" => $RDF8z->getId()]]); goto KWzH1; hr0J6: $FJ32m = new Criteria([$rjJGv]); goto OWSMK; KWzH1: throw new \Exception("\123\x48\x49\x52\124\x4e\105\x54\x57\x4f\122\113\137\x43\x41\116\116\117\x54\137\x4f\x52\x44\105\x52"); goto oB9Ox; ydYZP: $xSKdg = 0; goto VOd4S; yYhpi: vytcM: goto jW33o; jW33o: rMV_T: goto N1gn9; jdx_B: $UoeP0 = $RDF8z->getLineItems(); goto ydYZP; cj3m0: if (trim($ndkgg) != '' && trim($ndkgg) != "\117\113") { goto VUf0d; } goto Ld_GD; xWsI8: $ndkgg = $this->apiClient->bookCoins($RDF8z->getSalesChannelId(), $xSKdg, $RDF8z->getOrderNumber(), 0, $XoEcj); goto cj3m0; nEHcL: $RDF8z = $this->orderRepository->search($FJ32m, $kVGEo->getContext())->first(); goto jdx_B; VOd4S: $XoEcj = 0; goto DI1HK; Ld_GD: $this->apiClient->manifestOrder($RDF8z->getSalesChannelId(), $RDF8z); goto cR74U; OWSMK: $FJ32m->addAssociation("\154\151\156\145\x49\x74\x65\x6d\x73"); goto nEHcL; QU2Te: if (!($xSKdg > 0 || $XoEcj > 0)) { goto vytcM; } goto xWsI8; Wr46c: VUf0d: goto xGQCT; cR74U: goto EiBDK; goto Wr46c; PML9O: feXPX: goto QU2Te; DI1HK: foreach ($UoeP0 as $Bhba_) { goto Rt7vE; BXQ0f: ZXDms: goto ZVB57; R99VP: goto eltiV; goto m5c3L; h89WI: $XoEcj = $hr3v8->getUnitPrice() / 10 * $hr3v8->getQuantity(); goto R99VP; GX1Bu: $xSKdg += $hr3v8->getQuantity(); goto z2g3j; ZVB57: trtzT: goto aLRDJ; XEqpa: if (!isset($jJ5Kj["\x73\x68\x69\x72\164\x6e\x65\164\x77\157\x72\x6b"])) { goto ZXDms; } goto uFzKp; m5c3L: jnRsC: goto GX1Bu; Rt7vE: $jJ5Kj = $Bhba_->getPayload(); goto XEqpa; ojuEc: if ($hr3v8->getUnitPrice() >= 10) { goto jnRsC; } goto h89WI; z2g3j: eltiV: goto BXQ0f; uFzKp: $hr3v8 = $Bhba_->getPrice(); goto ojuEc; aLRDJ: } goto PML9O; N1gn9: } goto UDvTt; UDvTt: tMv2E: goto iTn9_; iTn9_: } }