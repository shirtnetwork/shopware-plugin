<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-15 13:11:20              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $NN_0O, EntityRepository $n281J) { $this->apiClient = $NN_0O; $this->orderRepository = $n281J; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\x6e\117\x72\x64\x65\162\120\154\141\x63\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $lPjPX) { goto aVdk1; qWcTH: U26t2: goto i3qZP; RFQrm: goto U26t2; goto OpAMV; OpAMV: MGtsH: goto Orv2U; dTUZD: $gthCV = $gD53N->getLineItems(); goto Yn_83; jFGWE: throw new \Exception("\123\110\x49\x52\124\116\105\124\127\x4f\122\113\x5f\103\x41\116\116\x4f\x54\137\x4f\x52\104\x45\x52"); goto qWcTH; x3V1y: $this->apiClient->manifestOrder($gD53N->getSalesChannelId(), $gD53N); goto RFQrm; aVdk1: $gD53N = $lPjPX->getOrder(); goto dTUZD; Yn_83: $Qxfwu = 0; goto CSkg1; t3nN7: foreach ($gthCV as $T4I04) { goto P_12D; CbPyp: $FWRjF = $T4I04->getPrice(); goto sjPEl; bmIrI: SVXRS: goto OGlu5; uk2p4: if (!($QZZBX && $QZZBX->packageUnit > 0)) { goto xCveF; } goto b0DcJ; g1vYt: $Ye6zI = $FWRjF->getQuantity(); goto uk2p4; X2tOR: if (!isset($Hm10V["\x73\x68\x69\x72\164\156\x65\164\x77\x6f\x72\153"])) { goto Vamfj; } goto CbPyp; sL9FK: goto cQOnT; goto bmIrI; YiA4F: Vamfj: goto NX3FA; METvg: $w1eCN = $FWRjF->getUnitPrice() / 10 * $Ye6zI; goto sL9FK; P_12D: $Hm10V = $T4I04->getPayload(); goto X2tOR; L8N1C: $QZZBX = isset($cS_5d["\x70\x72\157\144\165\x63\x74"]) ? $this->apiClient->getProductById($lPjPX->getSalesChannelContext()->getSalesChannelId(), $cS_5d["\x70\x72\157\144\165\143\x74"]) : null; goto g1vYt; iwwob: xCveF: goto PpSlR; OGlu5: $Qxfwu += $Ye6zI; goto S4zyh; S4zyh: cQOnT: goto YiA4F; sjPEl: $cS_5d = $Hm10V["\163\150\x69\162\164\156\x65\x74\167\x6f\162\x6b\x63\x6f\156\146\x69\x67"]; goto L8N1C; NX3FA: OMl0g: goto Es6PW; PpSlR: if ($FWRjF->getUnitPrice() >= 10) { goto SVXRS; } goto METvg; b0DcJ: $Ye6zI = $Ye6zI / $QZZBX->packageUnit; goto iwwob; Es6PW: } goto mGMAj; Orv2U: $this->orderRepository->delete([["\151\144" => $gD53N->getId()]], $lPjPX->getContext()); goto jFGWE; Js1AH: $this->orderRepository->update([["\x69\144" => $gD53N->getId(), "\143\165\x73\164\157\x6d\106\151\x65\154\x64\163" => ["\163\150\151\162\x74\x6e\145\x74\167\157\162\153" => ["\161\x75\x61\156\164\151\x74\x79" => $Qxfwu, "\x73\x75\155" => $w1eCN]]]], $lPjPX->getContext()); goto x3V1y; i3qZP: s6dWJ: goto wKU2f; vWXrl: if (!($Qxfwu > 0 || $w1eCN > 0)) { goto s6dWJ; } goto aMKTJ; mGMAj: ythIV: goto vWXrl; CSkg1: $w1eCN = 0; goto t3nN7; aMKTJ: $jIsp2 = $this->apiClient->bookCoins($gD53N->getSalesChannelId(), $Qxfwu, $gD53N->getOrderNumber(), 0, $w1eCN); goto uwAe7; uwAe7: if (trim($jIsp2) != '' && trim($jIsp2) != "\117\x4b") { goto MGtsH; } goto Js1AH; wKU2f: } }