<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-03-24 13:26:47              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $k3JXH, EntityRepositoryInterface $GopGB) { $this->apiClient = $k3JXH; $this->orderRepository = $GopGB; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\x6e\x4f\162\x64\145\162\120\154\x61\143\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $WjwJR) { goto iyf97; lZnvK: MTJID: goto RiTx3; VAz0Y: $this->orderRepository->delete([["\151\x64" => $GGnln->getId()]]); goto Axma3; OxGTO: $bo13S = 0; goto iGKpO; vZBiK: K1UYj: goto lZnvK; CBOa4: A2MOE: goto VAz0Y; VBRXP: foreach ($mhrDs as $E24wL) { goto alO78; oqQQj: $UjST4 = $E24wL->getPrice(); goto cRlHy; w3mcI: if (!isset($YRVxW["\163\x68\151\x72\x74\156\x65\164\x77\157\x72\x6b"])) { goto wICDC; } goto oqQQj; zsj59: w6FHl: goto NP_Mo; alO78: $YRVxW = $E24wL->getPayload(); goto w3mcI; pIk7e: $MtOCC = $UjST4->getUnitPrice() / 10 * $UjST4->getQuantity(); goto Xcy0q; cRlHy: if ($UjST4->getUnitPrice() >= 10) { goto w6FHl; } goto pIk7e; SIsC1: wICDC: goto lG35R; Xcy0q: goto gzyY3; goto zsj59; RHPdK: gzyY3: goto SIsC1; NP_Mo: $bo13S += $UjST4->getQuantity(); goto RHPdK; lG35R: kwAJx: goto trnMZ; trnMZ: } goto V_H4Q; DaGlm: $this->apiClient->manifestOrder($GGnln->getSalesChannelId(), $GGnln); goto FtOIG; hweNN: if (!($bo13S > 0 || $MtOCC > 0)) { goto MTJID; } goto aVobn; MvETz: if (trim($dB8Y8) != '' && trim($dB8Y8) != "\x4f\x4b") { goto A2MOE; } goto DaGlm; iGKpO: $MtOCC = 0; goto VBRXP; V_H4Q: nlt1K: goto hweNN; nWLBg: $mhrDs = $GGnln->getLineItems(); goto OxGTO; FtOIG: goto K1UYj; goto CBOa4; aVobn: $dB8Y8 = $this->apiClient->bookCoins($GGnln->getSalesChannelId(), $bo13S, $GGnln->getOrderNumber(), 0, $MtOCC); goto MvETz; iyf97: $GGnln = $WjwJR->getOrder(); goto nWLBg; Axma3: throw new \Exception("\123\110\111\122\x54\116\105\124\x57\x4f\122\x4b\137\103\x41\x4e\116\117\124\137\x4f\122\x44\105\122"); goto vZBiK; RiTx3: } }