<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2022-12-21 12:11:52              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $e5O3x, EntityRepositoryInterface $sNLZJ) { $this->apiClient = $e5O3x; $this->orderRepository = $sNLZJ; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\157\x6e\x4f\x72\x64\145\162\127\162\151\x74\164\145\156"]; } public function onOrderWritten(EntityWrittenEvent $SF43z) { goto GfKLe; YJC_3: foreach ($SdP2N as $fUdII) { goto kJFv0; fHhim: goto Q1AoI; goto QhawD; kJFv0: $lv0f1 = new Criteria([$fUdII]); goto HZSVy; L8qZC: OskQi: goto OOOEZ; iCJNB: $this->orderRepository->delete([["\x69\144" => $pM1H9->getId()]]); goto qVt54; GxWWK: $this->apiClient->manifestOrder($pM1H9->getSalesChannelId(), $pM1H9); goto fHhim; Ns4vU: ccvzP: goto JzypN; UI6va: foreach ($rRnIm as $yUQ68) { goto Udmij; KBnt0: D1GxH: goto UG_cx; Udmij: $J8tOd = $yUQ68->getPayload(); goto JZk8U; jfWwb: $Rpq39 = $A07yE->getUnitPrice() / 10 * $A07yE->getQuantity(); goto Pn9F7; Pn9F7: goto D1GxH; goto HtRGF; JZk8U: if (!isset($J8tOd["\163\x68\151\x72\164\x6e\145\164\167\x6f\162\x6b"])) { goto uEERt; } goto wxMbj; wxMbj: $A07yE = $yUQ68->getPrice(); goto ccaIt; UG_cx: uEERt: goto QTwd1; QTwd1: zR54A: goto u2jCV; dHbrV: $uuc9u += $A07yE->getQuantity(); goto KBnt0; ccaIt: if ($A07yE->getUnitPrice() >= 10) { goto tPxIU; } goto jfWwb; HtRGF: tPxIU: goto dHbrV; u2jCV: } goto Ns4vU; ChC2r: Q1AoI: goto L8qZC; JzypN: if (!($uuc9u > 0 || $Rpq39 > 0)) { goto OskQi; } goto xMP2L; HZSVy: $lv0f1->addAssociation("\154\151\156\x65\x49\164\145\155\163"); goto s0MZ9; XIruE: $rRnIm = $pM1H9->getLineItems(); goto uoSoJ; b11XI: $Rpq39 = 0; goto UI6va; OOOEZ: Yrlb6: goto YnaLT; QhawD: zBfhf: goto iCJNB; uoSoJ: $uuc9u = 0; goto b11XI; s0MZ9: $pM1H9 = $this->orderRepository->search($lv0f1, $SF43z->getContext())->first(); goto XIruE; xMP2L: $zZ7lh = $this->apiClient->bookCoins($pM1H9->getSalesChannelId(), $uuc9u, $pM1H9->getOrderNumber(), 0, $Rpq39); goto jMe20; qVt54: throw new \Exception("\x53\110\111\x52\124\116\x45\124\x57\x4f\x52\x4b\137\x43\x41\x4e\116\117\x54\x5f\x4f\122\104\x45\122"); goto ChC2r; jMe20: if (trim($zZ7lh) != '' && trim($zZ7lh) != "\117\x4b") { goto zBfhf; } goto GxWWK; YnaLT: } goto nPwHQ; nPwHQ: vky_j: goto SbZ2L; GfKLe: $SdP2N = $SF43z->getIds(); goto YJC_3; SbZ2L: } }