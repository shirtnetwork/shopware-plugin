<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-07-10 12:57:39              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $nhZQu, EntityRepository $TB8CO) { $this->apiClient = $nhZQu; $this->orderRepository = $TB8CO; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\x6e\x4f\162\x64\145\162\x50\x6c\x61\143\x65\x64"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $BubiM) { goto yUfL4; OHy0h: $VMdZ_ = 0; goto TF4v0; yUfL4: $VvMRd = $BubiM->getOrder(); goto r7B_T; pFq7_: $this->orderRepository->delete([["\151\144" => $VvMRd->getId()]]); goto W3ZDG; NwejV: if (!($x1l2D > 0 || $VMdZ_ > 0)) { goto pqNcF; } goto U4u4h; W3ZDG: throw new \Exception("\123\110\x49\122\124\116\x45\x54\127\117\x52\113\x5f\x43\x41\x4e\116\x4f\124\137\117\122\x44\x45\122"); goto Ji3Ha; ReBxw: KDM56: goto NwejV; U4u4h: $bQbhP = $this->apiClient->bookCoins($VvMRd->getSalesChannelId(), $x1l2D, $VvMRd->getOrderNumber(), 0, $VMdZ_); goto Gp8IK; r7B_T: $J2Qcm = $VvMRd->getLineItems(); goto UXm10; TF4v0: foreach ($J2Qcm as $asdLm) { goto gvM1_; c33US: $VMdZ_ = $DF21L->getUnitPrice() / 10 * $DF21L->getQuantity(); goto cgjC4; CaqK8: XUA8X: goto Xu1zC; KKxm1: if (!isset($JkLbj["\x73\x68\151\162\164\x6e\x65\164\167\x6f\162\x6b"])) { goto Lzbe7; } goto zAp8R; FcK6B: vqPvf: goto uu5O8; zAp8R: $DF21L = $asdLm->getPrice(); goto BXnM8; uu5O8: Lzbe7: goto NSB0y; Xu1zC: $x1l2D += $DF21L->getQuantity(); goto FcK6B; BXnM8: if ($DF21L->getUnitPrice() >= 10) { goto XUA8X; } goto c33US; cgjC4: goto vqPvf; goto CaqK8; gvM1_: $JkLbj = $asdLm->getPayload(); goto KKxm1; NSB0y: xbBXR: goto OfTU3; OfTU3: } goto ReBxw; v22iW: $this->apiClient->manifestOrder($VvMRd->getSalesChannelId(), $VvMRd); goto fRkC2; UXm10: $x1l2D = 0; goto OHy0h; Ji3Ha: GIVWd: goto hIsuZ; XMg6x: X8o2F: goto pFq7_; hIsuZ: pqNcF: goto XGKrb; Gp8IK: if (trim($bQbhP) != '' && trim($bQbhP) != "\117\113") { goto X8o2F; } goto v22iW; fRkC2: goto GIVWd; goto XMg6x; XGKrb: } }