<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-08-02 07:57:33              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $D6bZO, EntityRepository $ZeDOm) { $this->apiClient = $D6bZO; $this->orderRepository = $ZeDOm; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\156\x4f\162\x64\145\162\x50\x6c\x61\x63\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $dYG7n) { goto fbrhY; S51JD: Y6_9A: goto fJ0Rv; fbrhY: $e5dEf = $dYG7n->getOrder(); goto hRMp_; G4yIE: foreach ($ynI20 as $Dk3av) { goto gtwc1; ZlkO3: $NEAvs = $z321u->getUnitPrice() / 10 * $z321u->getQuantity(); goto M85Fy; xGdNK: BEV0w: goto tj32T; iWano: L9ZYy: goto xGdNK; ZAYwM: mVgDy: goto MZHSD; DyH3r: if (!isset($scSIG["\x73\150\151\x72\x74\x6e\x65\164\167\157\162\153"])) { goto L9ZYy; } goto bAS3B; r6BB8: DaGmb: goto iWano; MZHSD: $Co_ZD += $z321u->getQuantity(); goto r6BB8; Z2MFv: if ($z321u->getUnitPrice() >= 10) { goto mVgDy; } goto ZlkO3; bAS3B: $z321u = $Dk3av->getPrice(); goto Z2MFv; gtwc1: $scSIG = $Dk3av->getPayload(); goto DyH3r; M85Fy: goto DaGmb; goto ZAYwM; tj32T: } goto AaAMK; M1ymG: $this->apiClient->manifestOrder($e5dEf->getSalesChannelId(), $e5dEf); goto ZPJbj; doJqf: if (trim($euDLb) != '' && trim($euDLb) != "\117\x4b") { goto N11NK; } goto M1ymG; hRMp_: $ynI20 = $e5dEf->getLineItems(); goto cBorS; cBorS: $Co_ZD = 0; goto aQloL; ZeyQN: $euDLb = $this->apiClient->bookCoins($e5dEf->getSalesChannelId(), $Co_ZD, $e5dEf->getOrderNumber(), 0, $NEAvs); goto doJqf; o2O0b: $this->orderRepository->delete([["\x69\x64" => $e5dEf->getId()]]); goto ct7z2; aQloL: $NEAvs = 0; goto G4yIE; ct7z2: throw new \Exception("\123\x48\111\122\x54\x4e\x45\124\127\117\x52\113\137\x43\101\116\116\117\124\x5f\x4f\x52\104\105\x52"); goto S51JD; B5obd: N11NK: goto o2O0b; AaAMK: ROsn9: goto rTekC; fJ0Rv: R8pMp: goto f1AJ6; rTekC: if (!($Co_ZD > 0 || $NEAvs > 0)) { goto R8pMp; } goto ZeyQN; ZPJbj: goto Y6_9A; goto B5obd; f1AJ6: } }