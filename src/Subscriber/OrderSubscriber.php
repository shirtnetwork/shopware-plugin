<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2022-12-01 14:30:53              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $Enh60, EntityRepositoryInterface $WfsVq) { $this->apiClient = $Enh60; $this->orderRepository = $WfsVq; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\x6f\x6e\117\162\x64\145\x72\127\162\151\164\164\145\156"]; } public function onOrderWritten(EntityWrittenEvent $hi4Bj) { goto zqeMC; ASliT: foreach ($yZhCd as $N2UQ1) { goto adlIg; zE0Ah: if (!($XD0Ut > 0 || $Qfm1j > 0)) { goto KwmkV; } goto XEVov; adlIg: $WNbmk = new Criteria([$N2UQ1]); goto ncWXU; VJeaA: foreach ($yqUXx as $JEANr) { goto SiHSw; XkB_n: NJ70a: goto bX23i; Oy49D: $q_bKS = $JEANr->getPrice(); goto j0ypc; j0ypc: if ($q_bKS->getUnitPrice() >= 10) { goto zVhdG; } goto eQQVY; MiEuz: $XD0Ut += $q_bKS->getQuantity(); goto xueAN; gozL4: zVhdG: goto MiEuz; AF02C: if (!isset($Xyq2p["\163\150\x69\162\x74\156\145\x74\x77\x6f\x72\153"])) { goto NJ70a; } goto Oy49D; GplpG: goto Dznn3; goto gozL4; SiHSw: $Xyq2p = $JEANr->getPayload(); goto AF02C; xueAN: Dznn3: goto XkB_n; bX23i: HC2vp: goto K4StG; eQQVY: $Qfm1j = $q_bKS->getUnitPrice() / 10 * $q_bKS->getQuantity(); goto GplpG; K4StG: } goto u1F0W; T8r3Z: $Qfm1j = 0; goto VJeaA; GSsCg: UYlI9: goto A4NWz; Tnwpa: KwmkV: goto GSsCg; qdU24: if (trim($Th5GD) != '' && trim($Th5GD) != "\117\x4b") { goto Ar9ID; } goto nICtt; X9Tg7: throw new \Exception("\123\110\x49\x52\x54\116\105\x54\x57\x4f\122\113\137\103\101\116\116\x4f\x54\x5f\117\122\104\105\x52"); goto McYoE; McYoE: TJulg: goto Tnwpa; u1F0W: UZVYr: goto zE0Ah; ADPhR: $this->orderRepository->delete([["\x69\144" => $NgJ0Z->getId()]]); goto X9Tg7; FVfsy: goto TJulg; goto syOov; ncWXU: $WNbmk->addAssociation("\x6c\x69\x6e\145\x49\x74\145\x6d\163"); goto SxO3G; YxX5n: $XD0Ut = 0; goto T8r3Z; XEVov: $Th5GD = $this->apiClient->bookCoins($NgJ0Z->getSalesChannelId(), $XD0Ut, $NgJ0Z->getOrderNumber(), 0, $Qfm1j); goto qdU24; SxO3G: $NgJ0Z = $this->orderRepository->search($WNbmk, $hi4Bj->getContext())->first(); goto NYl2I; nICtt: $this->apiClient->manifestOrder($NgJ0Z->getSalesChannelId(), $NgJ0Z); goto FVfsy; syOov: Ar9ID: goto ADPhR; NYl2I: $yqUXx = $NgJ0Z->getLineItems(); goto YxX5n; A4NWz: } goto Yx8my; zqeMC: $yZhCd = $hi4Bj->getIds(); goto ASliT; Yx8my: TWRDw: goto KPESd; KPESd: } }