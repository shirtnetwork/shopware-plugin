<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2022-12-21 11:59:46              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $Fz9Se, EntityRepositoryInterface $XK_fH) { $this->apiClient = $Fz9Se; $this->orderRepository = $XK_fH; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\157\x6e\117\162\x64\x65\x72\127\162\151\x74\164\145\156"]; } public function onOrderWritten(EntityWrittenEvent $HHlbe) { goto x5t_N; bQ6ce: foreach ($pRM2S as $jKXoy) { goto h_gXN; KkgXZ: foreach ($taoxr as $VhfoJ) { goto fsUgL; FGQLr: goto Nrvq0; goto zjIB_; yiRZx: if ($lYK75->getUnitPrice() >= 10) { goto eDekU; } goto KCXzu; h36Tl: if (!isset($YpWsx["\163\x68\x69\x72\x74\156\x65\x74\167\157\x72\153"])) { goto pAC7V; } goto VcmdX; DjZ3l: vceTm: goto dsb5y; zjIB_: eDekU: goto vmzS1; fsUgL: $YpWsx = $VhfoJ->getPayload(); goto h36Tl; KCXzu: $GR6r2 = $lYK75->getUnitPrice() / 10 * $lYK75->getQuantity(); goto FGQLr; Cs9fR: Nrvq0: goto UYVEE; vmzS1: $N0Fb4 += $lYK75->getQuantity(); goto Cs9fR; UYVEE: pAC7V: goto DjZ3l; VcmdX: $lYK75 = $VhfoJ->getPrice(); goto yiRZx; dsb5y: } goto O092U; aZTDn: $gilf8 = $this->apiClient->bookCoins($VOssz->getSalesChannelId(), $N0Fb4, $VOssz->getOrderNumber(), 0, $GR6r2); goto h34NL; pqiRg: $GR6r2 = 0; goto KkgXZ; HIoIc: $taoxr = $VOssz->getLineItems(); goto HosG3; h34NL: if (trim($gilf8) != '' && trim($gilf8) != "\x4f\x4b") { goto BkCmY; } goto hR0M_; iUMjG: Z3UVp: goto VTY4Z; HosG3: $N0Fb4 = 0; goto pqiRg; O092U: X5oqD: goto dgcrR; dgcrR: if (!($N0Fb4 > 0 || $GR6r2 > 0)) { goto SzA_L; } goto aZTDn; VzLmy: goto dm55_; goto Fhc_4; mHxfM: throw new \Exception("\123\x48\x49\122\x54\x4e\x45\124\127\x4f\x52\x4b\x5f\103\101\x4e\116\117\124\x5f\x4f\x52\104\x45\x52"); goto nA8uc; AY7B2: $VOssz = $this->orderRepository->search($xZfBR, $HHlbe->getContext())->first(); goto HIoIc; hS2Y7: SzA_L: goto iUMjG; XZcaX: $xZfBR->addAssociation("\154\x69\x6e\x65\x49\x74\145\x6d\163"); goto AY7B2; mj1FT: $this->orderRepository->delete([["\151\144" => $VOssz->getId()]]); goto mHxfM; h_gXN: $xZfBR = new Criteria([$jKXoy]); goto XZcaX; Fhc_4: BkCmY: goto mj1FT; hR0M_: $this->apiClient->manifestOrder($VOssz->getSalesChannelId(), $VOssz); goto VzLmy; nA8uc: dm55_: goto hS2Y7; VTY4Z: } goto Rvidm; x5t_N: $pRM2S = $HHlbe->getIds(); goto bQ6ce; Rvidm: RGw4F: goto R_kUn; R_kUn: } }