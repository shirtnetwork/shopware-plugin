<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2023-07-10 09:30:39              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $yRkLS, EntityRepository $xjTbu) { $this->apiClient = $yRkLS; $this->orderRepository = $xjTbu; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\x6f\x6e\117\x72\x64\145\162\120\154\141\x63\x65\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $iRyAh) { goto dEznp; m05zo: $this->orderRepository->delete([["\x69\144" => $Sgpqh->getId()]]); goto ARPyH; R_Gky: $zZcRB = 0; goto s1yvz; dEznp: $Sgpqh = $iRyAh->getOrder(); goto f6dBX; jv0UI: zyNH3: goto BZ2gn; ARPyH: throw new \Exception("\x53\110\111\x52\x54\116\x45\124\x57\x4f\122\113\x5f\x43\x41\116\116\117\124\x5f\117\x52\104\x45\x52"); goto Q5me1; rF_yL: if (!($YYtNz > 0 || $zZcRB > 0)) { goto zyNH3; } goto dOKWW; Q5me1: GxERR: goto jv0UI; P4j41: $YYtNz = 0; goto R_Gky; ywgAr: goto GxERR; goto c7UH4; cwrAq: if (trim($DihHq) != '' && trim($DihHq) != "\x4f\x4b") { goto L4eE1; } goto O2Cv4; dOKWW: $DihHq = $this->apiClient->bookCoins($Sgpqh->getSalesChannelId(), $YYtNz, $Sgpqh->getOrderNumber(), 0, $zZcRB); goto cwrAq; c7UH4: L4eE1: goto m05zo; f6dBX: $LbJy3 = $Sgpqh->getLineItems(); goto P4j41; s1yvz: foreach ($LbJy3 as $iWY01) { goto v3lhO; sauX2: hMXUg: goto EQ0Wc; Rs3PM: $kN5Lr = $iWY01->getPrice(); goto a5HGI; c74pm: nulMa: goto Xwofr; v3lhO: $LqzBs = $iWY01->getPayload(); goto YuAjE; BiUFz: dp3eA: goto c74pm; a5HGI: if ($kN5Lr->getUnitPrice() >= 10) { goto hMXUg; } goto uJy4v; EQ0Wc: $YYtNz += $kN5Lr->getQuantity(); goto htKma; htKma: jH7Cp: goto BiUFz; SWNiW: goto jH7Cp; goto sauX2; YuAjE: if (!isset($LqzBs["\163\150\151\x72\164\x6e\x65\164\167\x6f\162\153"])) { goto dp3eA; } goto Rs3PM; uJy4v: $zZcRB = $kN5Lr->getUnitPrice() / 10 * $kN5Lr->getQuantity(); goto SWNiW; Xwofr: } goto rewRh; rewRh: REXKN: goto rF_yL; O2Cv4: $this->apiClient->manifestOrder($Sgpqh->getSalesChannelId(), $Sgpqh); goto ywgAr; BZ2gn: } }