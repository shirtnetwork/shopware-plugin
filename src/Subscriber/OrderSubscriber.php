<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-06-16 09:26:22              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $B8KKB, EntityRepository $o7kWF) { $this->apiClient = $B8KKB; $this->orderRepository = $o7kWF; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\156\x4f\x72\144\x65\x72\x50\x6c\141\143\145\x64"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $oX77x) { goto CY56y; vP0Uk: foreach ($z7WtT as $kwgJ9) { goto k0NBn; SmWsl: if (!isset($NWHzH["\x73\150\151\x72\164\x6e\145\x74\x77\157\x72\153"])) { goto U6E47; } goto VHpiL; LvESy: $DjCAb = isset($ALeyg["\160\162\x6f\x64\x75\143\x74"]) ? $this->apiClient->getProductById($oX77x->getSalesChannelId(), $ALeyg["\160\x72\157\144\x75\143\164"]) : null; goto zBLgx; eCfeO: if (!($DjCAb && $DjCAb->packageUnit > 0)) { goto ji6yo; } goto J1NT2; JKlsJ: $UVQc2 += $ZxXwK; goto YL19R; J1NT2: $ZxXwK = $ZxXwK / $DjCAb->packageUnit; goto c7qLJ; k0NBn: $NWHzH = $kwgJ9->getPayload(); goto SmWsl; hy1Hi: $ALeyg = $NWHzH["\x73\x68\x69\162\x74\x6e\145\164\x77\157\162\x6b\143\157\x6e\x66\x69\x67"]; goto LvESy; zBLgx: $ZxXwK = $hS807->getQuantity(); goto eCfeO; DP1He: f39aE: goto RX2xA; OKHiH: U6E47: goto DP1He; Po02v: $Bi9X0 = $hS807->getUnitPrice() / 10 * $ZxXwK; goto HyMSX; VHpiL: $hS807 = $kwgJ9->getPrice(); goto hy1Hi; i7yUw: if ($hS807->getUnitPrice() >= 10) { goto BvCxK; } goto Po02v; HyMSX: goto eGIDg; goto gXxan; YL19R: eGIDg: goto OKHiH; gXxan: BvCxK: goto JKlsJ; c7qLJ: ji6yo: goto i7yUw; RX2xA: } goto Gk22v; BWKVA: if (trim($EJtaF) != '' && trim($EJtaF) != "\117\x4b") { goto CfaDU; } goto Z7ST3; xqijx: $EJtaF = $this->apiClient->bookCoins($Pj8aQ->getSalesChannelId(), $UVQc2, $Pj8aQ->getOrderNumber(), 0, $Bi9X0); goto BWKVA; elNZJ: $z7WtT = $Pj8aQ->getLineItems(); goto xU8Le; CY56y: $Pj8aQ = $oX77x->getOrder(); goto elNZJ; ZSzgh: if (!($UVQc2 > 0 || $Bi9X0 > 0)) { goto JQNr0; } goto xqijx; s3ZYW: JPB6u: goto ZQQ7T; Z7ST3: $this->orderRepository->update([["\151\144" => $Pj8aQ->getId(), "\143\x75\163\x74\157\x6d\106\151\x65\154\144\163" => ["\163\150\151\162\164\x6e\x65\x74\x77\x6f\162\x6b" => ["\161\x75\141\x6e\x74\151\164\x79" => $UVQc2, "\163\x75\155" => $Bi9X0]]]], $oX77x->getContext()); goto Xbt0L; Xbt0L: $this->apiClient->manifestOrder($Pj8aQ->getSalesChannelId(), $Pj8aQ); goto JjCcV; Gk22v: vMBYi: goto ZSzgh; wdbNs: $Bi9X0 = 0; goto vP0Uk; JjCcV: goto JPB6u; goto S4OVF; S4OVF: CfaDU: goto o4Nax; ZQQ7T: JQNr0: goto X_EM9; eFNQM: throw new \Exception("\x53\x48\111\122\x54\116\105\124\x57\x4f\x52\113\x5f\x43\101\x4e\116\117\124\137\117\122\x44\105\x52"); goto s3ZYW; o4Nax: $this->orderRepository->delete([["\x69\x64" => $Pj8aQ->getId()]], $oX77x->getContext()); goto eFNQM; xU8Le: $UVQc2 = 0; goto wdbNs; X_EM9: } }