<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-08-18 10:27:37              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Cart\Event\CheckoutOrderPlacedEvent; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepository; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $oXGRW, EntityRepository $NNKft) { $this->apiClient = $oXGRW; $this->orderRepository = $NNKft; } public static function getSubscribedEvents() : array { return [CheckoutOrderPlacedEvent::class => "\157\x6e\117\162\x64\145\x72\x50\x6c\141\x63\145\144"]; } public function onOrderPlaced(CheckoutOrderPlacedEvent $Ekhpu) { goto eJmQD; fQ3Yj: YV_Kr: goto NUpx3; NUpx3: if (!($pvEAC > 0 || $JyVOS > 0)) { goto Tykx4; } goto z8R4G; f8pv7: $this->orderRepository->delete([["\151\x64" => $aCE2c->getId()]], $Ekhpu->getContext()); goto yycLS; PL31B: goto tSrKF; goto ey5OR; Lbm3W: $this->orderRepository->update([["\151\x64" => $aCE2c->getId(), "\x63\x75\163\164\157\155\x46\x69\x65\x6c\144\x73" => ["\x73\x68\151\x72\x74\156\x65\x74\167\157\x72\x6b" => ["\x71\x75\x61\x6e\164\x69\x74\171" => $pvEAC, "\163\x75\155" => $JyVOS]]]], $Ekhpu->getContext()); goto bAGk0; z8R4G: $CYNu6 = $this->apiClient->bookCoins($aCE2c->getSalesChannelId(), $pvEAC, $aCE2c->getOrderNumber(), 0, $JyVOS); goto hnknQ; Ke8Wb: tSrKF: goto YMVSg; eJmQD: $aCE2c = $Ekhpu->getOrder(); goto tV1Mu; ey5OR: RqyJS: goto f8pv7; a72mm: $JyVOS = 0; goto YxE1X; hnknQ: if (trim($CYNu6) != '' && trim($CYNu6) != "\x4f\x4b") { goto RqyJS; } goto Lbm3W; YxE1X: foreach ($B0cAj as $Qc3ej) { goto nQQyB; QAkeD: $PYzed = $PYzed / $Y9Z1C->packageUnit; goto OaGZe; OaGZe: PrwuA: goto l9iPw; NvyPS: XBnpp: goto x0_e7; nQQyB: $Ozdul = $Qc3ej->getPayload(); goto pLDK2; AREf0: sNJ6x: goto EKArZ; s9JkI: $PYzed = $mIP3k->getQuantity(); goto m1Utk; d72AF: goto wO_vg; goto AREf0; P1sKX: wO_vg: goto NvyPS; pLDK2: if (!isset($Ozdul["\x73\150\151\162\x74\x6e\x65\x74\167\157\162\x6b"])) { goto XBnpp; } goto Lhf7K; HIjI4: $JyVOS += $mIP3k->getUnitPrice() / 10 * $PYzed; goto d72AF; Vs9Rw: $hSkGV = $Ozdul["\163\150\151\162\164\156\x65\x74\x77\157\x72\153\143\157\156\x66\151\x67"]; goto F1OUt; Lhf7K: $mIP3k = $Qc3ej->getPrice(); goto Vs9Rw; EKArZ: $pvEAC += $PYzed; goto P1sKX; l9iPw: if ($mIP3k->getUnitPrice() >= 10) { goto sNJ6x; } goto HIjI4; m1Utk: if (!($Y9Z1C && $Y9Z1C->packageUnit > 0)) { goto PrwuA; } goto QAkeD; F1OUt: $Y9Z1C = isset($hSkGV["\x70\162\x6f\x64\x75\x63\164"]) ? $this->apiClient->getProductById($Ekhpu->getSalesChannelId(), $hSkGV["\160\x72\157\144\x75\x63\164"]) : null; goto s9JkI; x0_e7: d8Awk: goto OXYBt; OXYBt: } goto fQ3Yj; yycLS: throw new \Exception("\x53\110\111\122\124\x4e\x45\124\127\117\122\113\x5f\x43\101\116\116\x4f\124\137\117\122\104\x45\122"); goto Ke8Wb; nN1aZ: $pvEAC = 0; goto a72mm; bAGk0: $this->apiClient->manifestOrder($aCE2c->getSalesChannelId(), $aCE2c); goto PL31B; YMVSg: Tykx4: goto CBtkf; tV1Mu: $B0cAj = $aCE2c->getLineItems(); goto nN1aZ; CBtkf: } }