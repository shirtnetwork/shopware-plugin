<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2022-12-21 11:51:53              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $vsPgG, EntityRepositoryInterface $e60rY) { $this->apiClient = $vsPgG; $this->orderRepository = $e60rY; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\x6f\156\x4f\x72\144\x65\162\127\162\151\164\x74\145\156"]; } public function onOrderWritten(EntityWrittenEvent $Rzibp) { goto qrZ4G; eOcMc: yY8jJ: goto bymFN; m0ToY: foreach ($ZFOpe as $hV3h7) { goto hVmWe; LUno0: $n25Mw = 0; goto r9HpI; cuB1E: fHGEK: goto DU1Mr; kB5RR: throw new \Exception("\x53\110\111\122\x54\x4e\105\124\x57\117\122\x4b\137\x43\101\116\116\x4f\x54\x5f\117\x52\104\105\122"); goto nJA2C; gfC13: $this->orderRepository->delete([["\x69\x64" => $JTAU1->getId()]]); goto kB5RR; WPZKI: goto HuXiV; goto GSLGU; Vulk0: if (trim($JR90I) != '' && trim($JR90I) != "\117\113") { goto v3Rl9; } goto QfeJh; sFMKO: if (!($n25Mw > 0 || $dnjpC > 0)) { goto fHGEK; } goto MfRZR; QfeJh: $this->apiClient->manifestOrder($JTAU1->getSalesChannelId(), $JTAU1); goto WPZKI; qoooo: yBOaH: goto sFMKO; PgHG8: foreach ($ft0yo as $mKx9F) { goto BNc7I; iA7jk: if ($oDXun->getUnitPrice() >= 10) { goto MNIXd; } goto goX2l; BNc7I: $mUOJI = $mKx9F->getPayload(); goto HrgCd; cHT1Z: $n25Mw += $oDXun->getQuantity(); goto zHl2l; zHl2l: ryRiX: goto ctjgP; NtpyW: MNIXd: goto cHT1Z; zc0HU: miPsv: goto OCasi; goX2l: $dnjpC = $oDXun->getUnitPrice() / 10 * $oDXun->getQuantity(); goto jVQ7O; jVQ7O: goto ryRiX; goto NtpyW; HrgCd: if (!isset($mUOJI["\x73\x68\x69\162\x74\156\x65\164\167\157\x72\x6b"])) { goto VstHg; } goto td2sY; ctjgP: VstHg: goto zc0HU; td2sY: $oDXun = $mKx9F->getPrice(); goto iA7jk; OCasi: } goto qoooo; fkbbE: $ft0yo = $JTAU1->getLineItems(); goto LUno0; hVmWe: $aBVHY = new Criteria([$hV3h7]); goto fG92m; fG92m: $aBVHY->addAssociation("\x6c\151\156\145\x49\164\x65\x6d\x73"); goto Bghso; GSLGU: v3Rl9: goto gfC13; r9HpI: $dnjpC = 0; goto PgHG8; DU1Mr: tzUK7: goto ErJnY; Bghso: $JTAU1 = $this->orderRepository->search($aBVHY, $Rzibp->getContext())->first(); goto fkbbE; nJA2C: HuXiV: goto cuB1E; MfRZR: $JR90I = $this->apiClient->bookCoins($JTAU1->getSalesChannelId(), $n25Mw, $JTAU1->getOrderNumber(), 0, $dnjpC); goto Vulk0; ErJnY: } goto eOcMc; qrZ4G: $ZFOpe = $Rzibp->getIds(); goto m0ToY; bymFN: } }