<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2022-12-09 11:40:00              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
 namespace Aggrosoft\Shopware\ShirtnetworkPlugin\Subscriber; use Aggrosoft\Shopware\ShirtnetworkPlugin\Core\Shirtnetwork\ApiClient; use Shopware\Core\Checkout\Order\Aggregate\OrderLineItem\OrderLineItemEntity; use Shopware\Core\Checkout\Order\OrderEntity; use Shopware\Core\Checkout\Order\OrderEvents; use Shopware\Core\Framework\DataAbstractionLayer\EntityRepositoryInterface; use Shopware\Core\Framework\DataAbstractionLayer\Event\EntityWrittenEvent; use Shopware\Core\Framework\DataAbstractionLayer\Search\Criteria; use Symfony\Component\EventDispatcher\EventSubscriberInterface; class OrderSubscriber implements EventSubscriberInterface { private $apiClient; private $orderRepository; public function __construct(ApiClient $QjgPZ, EntityRepositoryInterface $bRgtx) { $this->apiClient = $QjgPZ; $this->orderRepository = $bRgtx; } public static function getSubscribedEvents() : array { return [OrderEvents::ORDER_WRITTEN_EVENT => "\157\156\117\x72\x64\x65\x72\x57\162\151\x74\x74\145\x6e"]; } public function onOrderWritten(EntityWrittenEvent $oYhfg) { goto L6Pul; UErVp: foreach ($GkwYq as $Xf0GK) { goto zPa8a; ybYg5: foreach ($QJ0rd as $FXGWS) { goto m3f5p; u1O3q: H9Vcp: goto zMvg3; W5y1M: goto zN2an; goto jBlrK; MrmAU: if (!isset($ptCqn["\163\x68\151\162\x74\156\145\164\x77\x6f\162\x6b"])) { goto x_Rrv; } goto nXS5Z; nXS5Z: $CJzCV = $FXGWS->getPrice(); goto fPpHl; m3f5p: $ptCqn = $FXGWS->getPayload(); goto MrmAU; tBICG: $k0WSp += $CJzCV->getQuantity(); goto jZkXN; fPpHl: if ($CJzCV->getUnitPrice() >= 10) { goto uI2HU; } goto L7FOP; L7FOP: $BWmfZ = $CJzCV->getUnitPrice() / 10 * $CJzCV->getQuantity(); goto W5y1M; MRXj3: x_Rrv: goto u1O3q; jBlrK: uI2HU: goto tBICG; jZkXN: zN2an: goto MRXj3; zMvg3: } goto aZUbd; sphq7: if (trim($kAo76) != '' && trim($kAo76) != "\x4f\x4b") { goto UYl8G; } goto WhMuX; dZz5F: qCDyv: goto bbd2z; V8xnK: $kAo76 = $this->apiClient->bookCoins($ie5VU->getSalesChannelId(), $k0WSp, $ie5VU->getOrderNumber(), 0, $BWmfZ); goto sphq7; Zy3OE: $this->orderRepository->delete([["\151\x64" => $ie5VU->getId()]]); goto cNWsm; bbd2z: w5toH: goto BAYbv; cNWsm: throw new \Exception("\123\110\111\122\x54\116\x45\124\127\117\x52\x4b\x5f\x43\101\x4e\116\117\124\x5f\117\x52\104\105\122"); goto dZz5F; WhMuX: $this->apiClient->manifestOrder($ie5VU->getSalesChannelId(), $ie5VU); goto ym68z; PWuA2: UYl8G: goto Zy3OE; BAYbv: oo9jf: goto XwFeb; Dcldw: $ie5VU = $this->orderRepository->search($YzDC7, $oYhfg->getContext())->first(); goto vwz4v; uqkyt: $YzDC7->addAssociation("\154\151\156\145\111\x74\x65\155\x73"); goto Dcldw; HNYSa: $BWmfZ = 0; goto ybYg5; weYv_: $k0WSp = 0; goto HNYSa; ym68z: goto qCDyv; goto PWuA2; aZUbd: Dbnxj: goto uNmZI; zPa8a: $YzDC7 = new Criteria([$Xf0GK]); goto uqkyt; vwz4v: $QJ0rd = $ie5VU->getLineItems(); goto weYv_; uNmZI: if (!($k0WSp > 0 || $BWmfZ > 0)) { goto w5toH; } goto V8xnK; XwFeb: } goto m7HLT; L6Pul: $GkwYq = $oYhfg->getIds(); goto UErVp; m7HLT: syNK8: goto Mpryc; Mpryc: } }